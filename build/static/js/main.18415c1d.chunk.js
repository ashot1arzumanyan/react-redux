(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(63)},50:function(e,t,n){},52:function(e,t,n){},54:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAvCAYAAABe1bwWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyM0U2OTk0QTA1RjAxMUUzOTkwODgwRUU1QTkwOENFMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyM0U2OTk0QjA1RjAxMUUzOTkwODgwRUU1QTkwOENFMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFCMUU5NjhCMDVGMDExRTM5OTA4ODBFRTVBOTA4Q0UwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFCMUU5NjhDMDVGMDExRTM5OTA4ODBFRTVBOTA4Q0UwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qB01LgAAARZJREFUeNrs279OwlAYhvHTwiC7AS5FFydCnMRBITE68ueSIK4ORiamoiMuTt4HCcwMDvX9wkcjOTqSGPq8yROGsvSXk3aBZH3bDz92qYbqTDVUEo57uVqqDzVR892F1D9P1LPK1LVqlgAl+D02/Z4zN6jZhap/4VH1AjODL/VgJ6at7jEpZhbt1J8pbH8jg7nAIdq5wZziEK2eYvDrUmD+koEAGGCAAQYYYP77qneVFgqcGGCAAQYYYIABBhhggGHAAAPMAZbknzc5DJwYYIABBhhggAEGmFLArGCItjaYdxyiLQxmjEO0icG8qScsipnF6+7hO1AvmISpWxRvpU3Y/o7+Ss3C9h8ZZdnS77mjum4RvgUYAIayI5icBAa3AAAAAElFTkSuQmCC"},55:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAvCAYAAABe1bwWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NjI0MDE3QTA1RUUxMUUzOTkwODgwRUU1QTkwOENFMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NjI0MDE3QjA1RUUxMUUzOTkwODgwRUU1QTkwOENFMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU2MjQwMTc4MDVFRTExRTM5OTA4ODBFRTVBOTA4Q0UwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU2MjQwMTc5MDVFRTExRTM5OTA4ODBFRTVBOTA4Q0UwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+50R7MgAAAQ9JREFUeNrs27FqwlAYhuFzgkMvoNBb6RXUTu1kOzk4VL0eJ0OXDi7q5FYd6+J1OCnqKAEF9fuboxhSR0Ga94UPQpx8OMRB9etk48561hrao/agefe/22tzbaLF2vfxBR9g7rQv7d0Vu65W05JSuPEJym9msNWqdmKedDHEJFM5Cs8Uyta0E7PQxT0WmWYGs8ch1y7C4M8iYC7JQAAMMMAAAwwwt16p0pqiwIkBBhhggAEGGGCAAQYYAgYYYK6QX1U++MKNEwMMMMAAAwwwwABTDJglDLlWBjPGIdePwbRxyBUbzEjrYHHKLIbHh29d62Hi+sHi9KmUuPR39C/awKX/yChK8/CeX7W3YOEOAgwA5jAzvf7VtbQAAAAASUVORK5CYII="},56:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAvCAYAAABe1bwWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNkZCQjA0NzA1RUQxMUUzOTkwODgwRUU1QTkwOENFMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNkZCQjA0ODA1RUQxMUUzOTkwODgwRUU1QTkwOENFMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU2RkJCMDQ1MDVFRDExRTM5OTA4ODBFRTVBOTA4Q0UwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU2RkJCMDQ2MDVFRDExRTM5OTA4ODBFRTVBOTA4Q0UwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jIYSGQAACrdJREFUeNrsWglYTXkb/92lbrdCiAljTfalkUiLyojEh0Sh1KdJGAzNzPeZ3ErKNYxnJpmxtMhSiMlHvpFsU1pIKSqlwliTFlm6e8ud/znRdDLjEZfw9D7Pee5z73vP/5zzO+//fX/vwno4awE4PbqB7+mKo0UK2z2/XlmoUNSaAPiEHCy8BYnf70h/Vjp6vvR/HQ6G0p+2cw7iLYmSHKUcDivN3q5fiIt5p3jFjr2ouXoNbEpbe6dYQ+S7PtruYfbx7YHW0w0Hd9Z7W6C8Z8LS76mjF7xm3HQXrZLj0lXCaAIKn1Jwn/0hDEqlk+zYaWhmXEaAhzMSzHoiLOoyRJLqjxIRdXUO5toPwowhmpCGbIXk1l3qZydyUA88j63pOmsCi8dzeX5CXVkFROuCYZ6fiNAAS5iN+vSjA2XowE7YFmiNqeKrEPl+j9p6UJ7ZEMtFY/L4CeydFboLeet8oDZsEONk+dnzYPsLsXKUGny9TNGxPf+DB0STr4al7kZY59AV2j/+BFlsPPEjdQ16Tnfye8B/Ea9ruIgbe+La2LSs++QERwwzvwXJnl+hFInrredJFUTBYRhmNBzbVzkiPO4WTibeJLvuwwPFxKgrls0ZBI1jcagKTwbjIbhc8GfYoXSkKfzCs1B4o3IM5Xx1S8vF8N2QguA8DjiBAqiPGclYtDozGzWCQHzZS4INAkt01dP+YADRacuD9zITrLLUBidgPeSnkxigcA36QEu4CgfremGp7+8UKNTPnbmNF/k95TYycx5gkastzCxGQxK+F3WVj+vjmlQGMfnea0BfbF3hgqjUchyOK0Jt7ftrPjZje2HBNH2wD8RAdD6TGY40eODPsccffYZi05ZM3Cl+2ljNZjdd7MlTOTb8kobAM0+hEHwH3gRLyiE16GsKroOENThrFCPY3xok3L13gHzSSQtCbwssHVCNWp+1UDQBRW34YPCEPogo1cE3axKbgoLG4foFybhcgoWF5XCfPRq2q40hCYlEbUlpvfVUV0MafQSdzl9EECGGR67KEHUoD4QYtiwpIS9wuq0B5ll3Qe3u/RDn5DP1bbSg6eaEnLY98fMPGSirkPzjWuyXXUgqrcGWnVlYeeAennztBb69HXHdf51Se/seCXfrMeVxLrYFWNFhsKWk56ftELTaCm4dKyBftRbVTUBRNzMGO0CA4FwW8afJLwXlpRbTWPKLKrCEOKbZ0wZh5toRkIdHoubG7WfEpw6y305BixBD4QIXnCbEcMe+bIjfETHkctmYPX0gHEe0hSwsHJLrN5lvvmN7aHnMRYqsPbYHpNKu4pXWfdUbqK6uQ2TMFSRfaIcVHp7oVXgJ0oNHoZQr6vEpLYdIuAmWVqYYHTAFW6ILcO5i8VsFZYBBR3i5G6JzeipEAsJJamoa7yvwbMZCbDsJP+3LQ/qlwuYB3tybuXX3Cbz8E+m97EqIYc3Ofai+UvAsJVNCnpAKTlYuvnOfgwvmpti6KwuPHstUCghfgws3x6GY3IcFSfBmSItLGHpOVz1oerog/h4bEX6JtEtotiW+VkpKADh8vAjnM4ux7Is5GGLxRz0xFEueEcOnEAWF4DNjQ4QKZiLs2G2cOqsaYmg0TA9fuQxBm9MnUbUrgUnUiP/jT7VFhaklAnZeQl5hxetv0Te5yQdlYgi+T67nC2t9wI6OgeJCVoNeQfwOK68QS1wcMM5sLILDMlFSJn6ta7XVVseCeYawaiOC+PsfIKuoZD6Ifk/wiI/7X7YY+3zP0Fv/jXyXKkz7VNItOrwvdrPDmLEmhBjuQ92jZ8RQIoU4NAp9Bhpg69fOiEoub/b6lqY9sNjBANxDsahKTmOGYHU18J2m4c6AEQgKycLNO49VE/onzj6gUuo6ekR9TsKPi4P8DDMnoR5Cw2EKCfuTmlWoUqSkQ7zrAJRPq5hEbXB/cOc7IzLpAY4cv0YCpOoehaVUtlxK+KrAtISw0Sp/bzEPZy1QtsLQajGtwLQC0wpMKzCtwLQC8yHymFbm22oxzcuuVTlJ0LuHDlZ4jEDPgixID8RCqWCWN9UtTFAzYxp0unVs1rpF1yvQPTcDskO/MdekqnSfW0BqZ4fNdJWu5P2yGDU1Ntwch2DTooHoEhECSWQM4wHYuh3QxvsrpA0fB0//5Gav7+WfgL2SruCvE4A70OAvBVUxPJ0EbuB6+Fi3wXfLTOgGm0os5k0XGNxfF8vnG6LTuSSIVzF7wdQb1ZhohSqbidgYdQWZTSr3rypUUy/mt0Kkpt/Dck9XDCwphCTqEF3roYSq/Yg2bsVIEyOE+jlg+5EbdPOwRYDh87lwnz0Mtt2VkARtgvT+A4ae060LNBfNw7E/lNhN1V1lNW/8Fqnqn7fwLCZY9YbHWgFY+2PoKuFzUaRlgpV7FctdZ+FzCwtsDs8C1X5+Z8AYG3bBMufB0Io/jqodSS82yKdNRNloc6yOuIyCaw9V6hSpS51IuEn7k6Xzp8LYfDQkEfvpOjOtF0sg3rYb/YYMwLZv52JPYgli46+jucG3WT6mHdm/K5eawM9GB+rCDZCfPMtskPftDW2hNw5x+2KJb4LKQWksVOchMOgc1p+TodbfGzxrM0YrmepcyAVr8e/25XQjjmrIvRWLsTbrgUX2fcGJOYyq1AwmGeLxwHeailsGhgjamoXb9568s7BK9a5y8svwhbMFPjcbBUlYFN3joq1HrqADQVf9DGxe7IqYS1XYfyQfNTV1b24xnXU1EbjSAl7DiZPzE0LRBBRq4IgaPNpd2QleaxLfKSjPhRqHCw67CJ/YUkj+8w00ptgwWslU11QsEGKGoghbAq0xqJ/u61sM1SCfYqOP+eO7oTYyGqLLeUy9liY0iZO70rEPNm+8+NpOTpVCWc4isoVdHIZieoAxpKF76P56fWirg/RwHHQuZGGDpwvi7nbHrujcfwwKfwtMj25tsdzDCPo3yYmCnVDKmP1e9TFGqHOaiV9ib+BUUjLeJ6EmLiL25yCpd3usWPgluuWkE2J4jJ7QoPEh0bNqzY8YbzMWYwIm4WdCDKnWz0uB4RLzmzV1AGYb60AeEQFJ4Q3mvmuvA02PuThf3QHb1qTg8Ss2yFtCrt98hOWEGDpM7o+5hBgqdkTRsz0NxJAEDvWL2fD1cEYK8Z8hkZcZDX8KGKqPqdtfvwNWfPEZ9DLPk/0Y92KDnFBvGaHe66LzkZZZ9EHkOxQxPHi0ACnp2iRVcUP/4gJI9h6ip8NoYlhJiOEPWzDK1BhGvvaEGF5HQuodSvWQy+Nxkt1mDbWf0pcD6ZZfIL3DnFDg6HWG5sJ5OHGfiwi/s5BIP7y53/sPRFhJiKGtdR+4C33B2ncQCmItDdvvXAZYhJWvcHPEOHNz/LwjK4l1/27lhHZnTp2QxZ15oUFOefdHFtbYtCsbuVfLVXajLTkyT43lLnEfgZHy+5DsiqYnU5tGWY7rHFs2f/3Gk7Jjp6Mag8Lp1R3agd44qjUIi30SVApKS8vDR1IE/JiKDenVUPoLwLMcw9BX5+RHEWJ4gktNghOhXp06S13NkT/zX7g31BhBYZm4cfsxPlahEtLsvDIscLaCNZVWUMSwrOJXCgulXN5A8KQknXciaf3UKHGX2OWrfy/9mEFpIIZiBYJCM0r9/l8WK1357TSNyeMdwWbTKfufAgwAryiYi1WydiIAAAAASUVORK5CYII="},57:function(e,t,n){e.exports=n.p+"static/media/armenian_dram_sign.3cbba901.svg"},60:function(e,t,n){e.exports=n.p+"static/media/edit.b9a42c86.svg"},61:function(e,t,n){e.exports=n.p+"static/media/delete.2fb2c0c5.svg"},63:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(16),i=n.n(r),s=n(5),c=n(6),l=n(9),u=n(4),m=n(8),d=n(11),p=n(12),h=n.n(p),y=(n(48),n(49),n(50),n(52),n(20)),f=n(34),b=n(35),v=n(36),E=n(10),O={common:{region:"",city:"",type:"",subType:"",price:"",unit:"",available_quantity:"",email:"",phone:"",comment:"",plan_to_have:"",quantity:"",when:"",add:"",oneTime:"",continuous:"",frequency:"",year:"",month:"",day:"",week:"",mark_the_date:"",username:"",password:"",repeat_password:"",yourName:"",units:{kg:"",hat:"",gram:"",tonna:""}},Login:{},addNewDemand:{},Navigation:{login:"",register:"",addNewProposal:"",addNewDemand:""},Filter:{regions:{erevan:"",aragacotn:"",ararat:"",armavir:"",gexarkunik:"",kotayk:"",lori:"",shirak:"",syunik:"",tavush:"",vayoc_cor:""},cities:{ashtarak:"",aparan:"",talin:"",ararat:"",artashat:"",masis:"",vedi:"",armavir:"",vaxarshapat:"",mecamor:"",gavar:"",jambarak:"",martuni:"",sevan:"",vardenis:"",abovyan:"",byurexavan:"",exvard:"",nor_hajn:"",charencavan:"",alaverdi:"",axtala:"",tumanyan:"",shamlux:"",spitak:"",stepanavan:"",tashir:"",artik:"",gyumri:"",maralik:"",agarak:"",goris:"",dastakert:"",kapan:"",mexri:"",sisian:"",qajaran:"",ayrum:"",berd:"",dilijan:"",ijevan:"",noyemberyan:"",exegnacor:"",jermuk:"",vayq:""},types:{katnamterq:"",msamterq:"",banjarexen:"",mirg:"",hataptux:"",chir_ev_charaz:"",pahaconer:"",kanachexen:"",tnkiner:""},subTypes:{panir:"",kat:"",garan_mis:"",khozi_mis:"",khncor:"",tanc:"",ciran:"",khaxox:"",khncoreni:"",saloreni:"",tanceni:""}}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LANG":return Object(E.a)({},e,t.payload);default:return e}},k={isFetching:!1,isLoggedIn:!1,isFirstLogin:!1,email:"",username:"",_id:"",errors:[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(E.a)({},e,t.payload,{errors:[],isLoggedIn:!0,isFetching:!1,isFirstLogin:!1});case"LOGIN_FAIL":return Object(E.a)({},e,t.payload,{isLoggedIn:!1,isFetching:!1});case"CHECK_TOKEN_START_FETCHING":return Object(E.a)({},e,{isFetching:!0});case"CHECK_TOKEN_SUCCESS":return Object(E.a)({},e,t.payload,{isLoggedIn:!0,isFetching:!1});case"CHECK_TOKEN_FAIL":return Object(E.a)({},e,{isLoggedIn:!1,isFetching:!1,email:"",username:"",_id:""});case"LOGOUT":return Object(E.a)({},e,{isLoggedIn:!1,email:"",username:"",_id:""});case"SET_USER_EMAIL":return Object(E.a)({},e,{isFirstLogin:!0,email:t.payload});default:return e}},_={isFetching:!1,confirmationMsgSent:!1,email:"",username:"",errors:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_SUCCESS":return Object(E.a)({},e,t.payload,{confirmationMsgSent:!0,errors:[]});case"REGISTER_FAIL":return Object(E.a)({},e,t.err);default:return e}},N=n(19),w={skip:0,count:10,isFetchingGet:!1,isFetchingAddNew:!1,proposals:[],errors:[],linkToCachedAll:"a"},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROPSALS_START_FETCHING":return Object(E.a)({},e,{isFetchingGet:!0});case"GET_PROPOSALS_SUCCESS":var n=t.payload,a=n.proposals,o=n.skip,r=n.count,i=n.linkToCachedAll;return Object(E.a)({},e,{proposals:Object(N.a)(e.proposals).concat(Object(N.a)(a)),skip:o||e.count,count:r||e.count,errors:[],isFetchingGet:!1,linkToCachedAll:i||e.linkToCachedAll});case"GET_PROPOSALS_FAIL":return Object(E.a)({},e,{errors:t.payload,isFetchingGet:!1});case"SAVE_PROPOSAL_START_FETCHING":return Object(E.a)({},e,{isFetchingAddNew:!0});case"SAVE_PROPOSAL_SUCCESS":return Object(E.a)({},e,{proposals:Object(N.a)(t.payload).concat(Object(N.a)(e.proposals)),skip:e.skip+1,count:e.count+1,isFetchingAddNew:!1});case"SAVE_PROPOSAL_FAIL":return Object(E.a)({},e,{errors:t.payload,isFetchingAddNew:!1});case"DELETE_PROPOSAL_SUCCESS":var s=e.proposals.filter(function(e){return e._id!==t.payload});return Object(E.a)({},e,{proposals:s,skip:0===e.skip?0:e.skip-1,count:0===e.count?0:e.count-1});case"DELETE_PROPOSAL_FAIL":return Object(E.a)({},e,{errors:t.payload});case"EDIT_PROPOSAL_START_FETCHING":return Object(E.a)({},e,{isFetchingAddNew:!0});case"EDIT_PROPOSAL_SUCCESS":return Object(E.a)({},e,{isFetchingAddNew:!1});case"EDIT_PROPOSAL_FAIL":return Object(E.a)({},e,{errors:t.payload,isFetchingAddNew:!1});default:return e}},I={skip:0,count:10,isFetchingGet:!1,isFetchingAddNew:!1,demands:[],errors:[],linkToCachedAll:"a"},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DEMANDS_START_FETCHING":return Object(E.a)({},e,{isFetchingGet:!0});case"GET_DEMANDS_SUCCESS":var n=t.payload,a=n.demands,o=n.skip,r=n.count,i=n.linkToCachedAll;return Object(E.a)({},e,{demands:Object(N.a)(e.demands).concat(Object(N.a)(a)),skip:o||e.count,count:r||e.count,errors:[],isFetchingGet:!1,linkToCachedAll:i||e.linkToCachedAll});case"GET_DEMANDS_FAIL":return Object(E.a)({},e,t.payload,{isFetchingGet:!1});case"SAVE_DEMAND_START_FETCHING":return Object(E.a)({},e,{isFetchingAddNew:!0});case"SAVE_DEMAND_SUCCESS":return Object(E.a)({},e,{demands:Object(N.a)(t.payload).concat(Object(N.a)(e.demands)),skip:e.skip+1,count:e.count+1,isFetchingAddNew:!1});case"SAVE_DEMAND_FAIL":return Object(E.a)({},e,{isFetchingAddNew:!1});case"DELETE_DEMAND_SUCCESS":var s=e.demands.filter(function(e){return e._id!==t.payload});return Object(E.a)({},e,{demands:s,skip:0===e.skip?0:e.skip-1,count:0===e.count?0:e.count-1});case"DELETE_DEMAND_FAIL":return Object(E.a)({},e,{errors:t.payload});case"EDIT_DEMAND_START_FETCHING":return Object(E.a)({},e,{isFetchingAddNew:!0});case"EDIT_DEMAND_SUCCESS":case"EDIT_DEMAND_FAIL":return Object(E.a)({},e,{isFetchingAddNew:!1});default:return e}},C={isLoaded:!1,city:{ashtarak:{proposal:0,demand:0},aparan:{proposal:0,demand:0},talin:{proposal:0,demand:0},ararat:{proposal:0,demand:0},artashat:{proposal:0,demand:0},masis:{proposal:0,demand:0},vedi:{proposal:0,demand:0},armavir:{proposal:0,demand:0},vaxarshapat:{proposal:0,demand:0},mecamor:{proposal:0,demand:0},gavar:{proposal:0,demand:0},jambarak:{proposal:0,demand:0},martuni:{proposal:0,demand:0},sevan:{proposal:0,demand:0},vardenis:{proposal:0,demand:0},abovyan:{proposal:0,demand:0},byurexavan:{proposal:0,demand:0},exvard:{proposal:0,demand:0},nor_hajn:{proposal:0,demand:0},charencavan:{proposal:0,demand:0},alaverdi:{proposal:0,demand:0},axtala:{proposal:0,demand:0},tumanyan:{proposal:0,demand:0},shamlux:{proposal:0,demand:0},spitak:{proposal:0,demand:0},stepanavan:{proposal:0,demand:0},tashir:{proposal:0,demand:0},artik:{proposal:0,demand:0},gyumri:{proposal:0,demand:0},maralik:{proposal:0,demand:0},agarak:{proposal:0,demand:0},goris:{proposal:0,demand:0},dastakert:{proposal:0,demand:0},kapan:{proposal:0,demand:0},mexri:{proposal:0,demand:0},sisian:{proposal:0,demand:0},qajaran:{proposal:0,demand:0},ayrum:{proposal:0,demand:0},berd:{proposal:0,demand:0},dilijan:{proposal:0,demand:0},ijevan:{proposal:0,demand:0},noyemberyan:{proposal:0,demand:0},exegnacor:{proposal:0,demand:0},jermuk:{proposal:0,demand:0},vayq:{proposal:0,demand:0}},region:{erevan:{proposal:0,demand:0},aragacotn:{proposal:0,demand:0},ararat:{proposal:0,demand:0},armavir:{proposal:0,demand:0},gexarkunik:{proposal:0,demand:0},kotayk:{proposal:0,demand:0},lori:{proposal:0,demand:0},shirak:{proposal:0,demand:0},syunik:{proposal:0,demand:0},tavush:{proposal:0,demand:0},vayoc_cor:{proposal:0,demand:0}},subType:{panir:{proposal:0,demand:0},kat:{proposal:0,demand:0},garan_mis:{proposal:0,demand:0},khozi_mis:{proposal:0,demand:0},khncor:{proposal:0,demand:0},tanc:{proposal:0,demand:0},ciran:{proposal:0,demand:0},khaxox:{proposal:0,demand:0},khncoreni:{proposal:0,demand:0},saloreni:{proposal:0,demand:0},tanceni:{proposal:0,demand:0}},type:{katnamterq:{proposal:0,demand:0},msamterq:{proposal:0,demand:0},banjarexen:{proposal:0,demand:0},mirg:{proposal:0,demand:0},hataptux:{proposal:0,demand:0},ynkuzexen:{proposal:0,demand:0},chir_ev_charaz:{proposal:0,demand:0},pahaconer:{proposal:0,demand:0},kanachexen:{proposal:0,demand:0},tnkiner:{proposal:0,demand:0}}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SUM_OF_SUCCESS":return Object(E.a)({},e,t.payload,{isLoaded:!0});default:return e}},D={isLoaded:!1,isFetching:!1,demandsById:[],errors:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DEMANDS_BY_ID_START_FETCHING":return Object(E.a)({},e,{isFetching:!0});case"GET_DEMANDS_BY_ID_SUCCESS":return Object(E.a)({},e,{demandsById:t.payload,isLoaded:!0,isFetching:!1,errors:[]});case"GET_DEMANDS_BY_ID_FAIL":return Object(E.a)({},e,t.payload,{isFetching:!1});case"DELETE_DEMAND_SUCCESS":var n=t.payload;return Object(E.a)({},e,{demandsById:e.demandsById.filter(function(e){return e._id!==n})});case"DELETE_DEMAND_FAIL":return Object(E.a)({},e,{errors:t.payload});default:return e}},M={isFetching:!1,proposalsById:[],errors:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROPSALS_BY_ID_START_FETCHING":return Object(E.a)({},e,{isFetching:!0});case"GET_PROPOSALS_BY_ID_SUCCESS":return Object(E.a)({},e,{proposalsById:t.payload,errors:[],isFetching:!1});case"GET_PROPOSALS_BY_ID_FAIL":return Object(E.a)({},e,{errors:t.payload,isFetching:!1});case"DELETE_PROPOSAL_SUCCESS":var n=t.payload;return Object(E.a)({},e,{proposalsById:e.proposalsById.filter(function(e){return e._id!==n})});case"DELETE_PROPOSAL_FAIL":return Object(E.a)({},e,{errors:t.payload});default:return e}},B=n(13),P={region:null,city:null,type:null,subType:null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FILTER":return Object(E.a)({},e,t.payload);case"DELETE_FILTER":return Object(E.a)({},e,Object(B.a)({},t.payload,null));case"RESET_FILTERS":return Object(E.a)({},e,P);default:return e}},G=Object(y.combineReducers)({content:g,user:j,userRegister:S,proposals:A,demands:T,sumOf:F,filterBy:R,demandsById:L,proposalsById:x}),Y=Object(y.applyMiddleware)(b.a,Object(f.createLogger)()),U=Object(y.createStore)(G,Object(v.composeWithDevTools)(Y)),q=n(3),V=n(67),Z=n(64),W=n(65),H=n(21),J=n(2),z=function(e){return{type:"LOGIN_SUCCESS",payload:e}},X=function(e){return{type:"LOGIN_FAIL",payload:e}},Q=function(e,t){return function(n){fetch("/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return localStorage.setItem("access_token",e.access_token),n(z(e.user)),void t();throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(X(e))})}},K=function(){function e(t){Object(s.a)(this,e),this.target=t.target}return Object(c.a)(e,[{key:"focus",value:function(){var e=this.target.parentElement;e.classList.add("jump"),e.classList.remove("jumpCancel")}},{key:"blur",value:function(){var e=this.target.parentElement;this.target.value||(e.classList.remove("jump"),e.classList.add("jumpCancel"))}},{key:"checkListIsClosed",value:function(){return this.target.parentElement.querySelector("ul").classList.contains("d-none")}},{key:"getName",value:function(){return this.target.name}},{key:"getValue",value:function(){return this.target.value}},{key:"getNameValue",value:function(){return{name:this.getName(),value:this.getValue()}}},{key:"getNameValueLowerCased",value:function(){return{name:this.getName(),value:this.getValue().toLowerCase()}}},{key:"getDatasetEn",value:function(){var e=this.target.dataset.en;return this.target.hasAttribute("data-en")&&"undefined"!==e?e:null}}]),e}(),$=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:""},n.handleOnInput=n.handleOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n.handleOnBlur=n.handleOnBlur.bind(Object(q.a)(Object(q.a)(n))),n.handleOnFocus=n.handleOnFocus.bind(Object(q.a)(Object(q.a)(n))),n.switchToResetPassword=n.switchToResetPassword.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user,t=e.email;if(e.isFirstLogin){this.setState({email:t});var n=document.querySelector('input[name="email"]'),a=document.querySelector('input[name="password"]');n.focus(),a.focus()}}},{key:"handleOnInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(B.a)({},t,n))}},{key:"handleOnFocus",value:function(e){new K(e).focus()}},{key:"handleOnBlur",value:function(e){new K(e).blur()}},{key:"switchToResetPassword",value:function(){this.props.history.push("/sendVerificationCode")}},{key:"handleSubmit",value:function(){var e=this,t=this.state,n=t.email,a=t.password;this.props.loginUser({email:n,password:a},function(){e.props.history.push("/")})}},{key:"render",value:function(){var e=this.props,t=e.common,n=e.user.isFirstLogin;return o.a.createElement("div",{className:"d-flex flex-column align-items-center"},o.a.createElement(function(){return n?o.a.createElement("div",null,"\u0534\u0578\u0582\u0584 \u0570\u0561\u057b\u0578\u0572\u0578\u0582\u0569\u0575\u0561\u0574\u0562 \u0563\u0580\u0561\u0576\u0581\u057e\u0565\u056c \u0565\u0584 \u056f\u0561\u0580\u0578\u0572 \u0565\u0584 \u0574\u0578\u0582\u057f\u0584 \u0563\u0585\u0580\u056e\u0565\u056c \u0570\u0561\u0574\u0561\u056f\u0561\u0580\u0563\u0589"):""},null),o.a.createElement(J.j,{className:"col-4 mt-4"},o.a.createElement(J.l,{className:n?"jump":"jumperLabel"},o.a.createElement(J.n,{for:"email"},t.email),o.a.createElement(J.m,{id:"email",name:"email",onChange:this.handleOnInput,onBlur:this.handleOnBlur,onFocus:this.handleOnFocus,value:this.state.email})),o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:"password"},t.password),o.a.createElement(J.m,{type:"password",name:"password",id:"password",onChange:this.handleOnInput,onBlur:this.handleOnBlur,onFocus:this.handleOnFocus})),o.a.createElement(J.b,{color:"link",onClick:this.switchToResetPassword},"Forgot password?"),o.a.createElement(J.b,{color:"success",onClick:this.handleSubmit},"Login")))}}]),t}(a.Component),ee=Object(d.b)(function(e){return{common:e.content.common,content:e.content.Login,loginUser:e.loginUser,user:e.user}},{loginUser:Q})($),te=function(e){return{type:"REGISTER_SUCCESS",payload:e}},ne=function(e){return{type:"REGISTER_FAIL",err:e}},ae=function(e){return function(t){fetch("/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return t(te(e.user));throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),t(ne(e))})}},oe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.name,a=e.type,r=e.commonProps,i=r.onInput,s=r.onBlur,c=r.onFocus,l=r.isBlurred,u=r.isInvalidMsg,m="contentName"in this.props?this.props.contentName:n;return o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:n},t[m]),o.a.createElement(J.m,{id:n,type:a,name:n,onInput:i,onFocus:c,onBlur:s,valid:l[n]&&""===u[n],invalid:l[n]&&""!==u[n]}),o.a.createElement(J.k,null,u[n]))}}]),t}(a.Component),re=Object(d.b)(function(e){return{common:e.content.common}})(oe),ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isInvalidMsg:{email:"",username:"",password:"",repeat_password:""},isBlurred:{email:!1,username:!1,password:!1,repeat_password:!1}},n.handleOnFocus=n.handleOnFocus.bind(Object(q.a)(Object(q.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n.handleOnBlur=n.handleOnBlur.bind(Object(q.a)(Object(q.a)(n))),n.handleOnInput=n.handleOnInput.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleOnFocus",value:function(e){new K(e).focus()}},{key:"handleOnBlur",value:function(e){var t=new K(e),n=t.getNameValue(),a=n.name,o=n.value;t.blur(),this.setIsBlurredTrue(a),this.validate(a,o)}},{key:"handleOnInput",value:function(e){var t=new K(e).getNameValue(),n=t.name,a=t.value;this.state.isBlurred[n]&&this.validate(n,a),this.setState(Object(B.a)({},n,a))}},{key:"setIsBlurredTrue",value:function(e){var t=Object(E.a)({},this.state.isBlurred);t[e]=!0,this.setState({isBlurred:t})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.validateAll()){var t=this.state,n=t.email,a=t.username,o=t.password,r=t.repeat_password;this.props.registerUser({email:n,username:a,password:o,repeat_password:r})}}},{key:"render",value:function(){var e=this.state,t=e.isInvalidMsg,n=e.isBlurred,a=this.props.userRegister,r={onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,onInput:this.handleOnInput,isBlurred:n,isInvalidMsg:t};if(a.confirmationMsgSent){return o.a.createElement(function(e){var t=e.username,n=e.email;return o.a.createElement(J.c,{className:"align-items-center"},o.a.createElement("div",{className:"col-4 d-flex flex-column align-items-center"},o.a.createElement("h1",null,"\u0532\u0561\u0580\u0587 ",t),o.a.createElement("p",{className:"text-center"},"\u0533\u0580\u0561\u0576\u0581\u0578\u0582\u0574\u0576 \u0561\u057e\u0561\u0580\u057f\u0565\u056c\u0578\u0582 \u0570\u0561\u0574\u0561\u0580 \u056d\u0576\u0564\u0580\u0582\u0574 \u0565\u0576\u0584 \u057d\u057f\u0578\u0582\u0563\u0565\u056c \u0571\u0565\u0580 ",n," \u0570\u0561\u057d\u0581\u0565\u0576 \u0587 \u0570\u0561\u057d\u057f\u0561\u057f\u0565\u056c \u0571\u0565\u0580 \u0563\u0580\u0561\u0576\u0581\u0578\u0582\u0574\u0568 \u057d\u0565\u056d\u0574\u0565\u056c\u0578\u057e \u0570\u0561\u057d\u057f\u0561\u057f\u0565\u056c \u056f\u0578\u0573\u0561\u056f\u0568")))},{username:a.username,email:a.email})}return o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(J.j,{className:"col-4 mt-4"},o.a.createElement(re,{name:"email",type:"text",commonProps:r}),o.a.createElement(re,{name:"username",type:"text",commonProps:r}),o.a.createElement(re,{name:"password",type:"password",commonProps:r}),o.a.createElement(re,{name:"repeat_password",type:"password",commonProps:r}),o.a.createElement(J.b,{color:"success",onClick:this.handleSubmit},"Register")))}},{key:"validateAll",value:function(){var e,t=Object(E.a)({},this.state.isBlurred),n=[],a=Object.keys(t);a.forEach(function(a){t[a]=!0,e=document.getElementById(a),n.push({name:a,value:e.value})});var o=this.msgCreator(n);this.setState({isBlurred:t,isInvalidMsg:o});var r=!1;return a.forEach(function(e){r||""===o[e]||(r=!0)}),r}},{key:"validate",value:function(e,t){var n=this.msgCreator([{name:e,value:t.trim()}]);this.setState({isInvalidMsg:n})}},{key:"msgCreator",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(E.a)({},this.state.isInvalidMsg),a="",o="";return t.forEach(function(t){switch(a=t.name,o=t.value,n[a]="",a){case"email":n[a]=e.checkEmail(o);break;case"username":n[a]=e.checkUsername(o);break;case"password":var r=document.querySelector('input[name = "repeat_password"]');if(""===o){n[a]="Password should not be empty and most be at least 7 characters";break}if(o.length<7){n[a]="Password most be at least 7 characters";break}if(o!==r.value.trim()){n[a]="Passwords not matched",n[r.name]="Passwords not matched";break}n[r.name]="";break;case"repeat_password":var i=document.querySelector('input[name = "password"]');if(""===o){n[a]="Password should not be empty and most be at least 7 characters";break}if(o.length<7){n[a]="Password most be at least 7 characters";break}if(o!==i.value.trim()){n[a]="Passwords not matched",n[i.name]="Passwords not matched";break}n[i.name]=""}}),n}},{key:"checkEmail",value:function(e){var t="";return""===e?t="Email should not be empty and most be a correct email":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(t="Email is not correct"),t}},{key:"checkUsername",value:function(e){var t="";return""===e?t="Username should not be empty and most be at least 3 characters":e.length<3&&(t="Username most be at least 3 characters"),t}}]),t}(a.Component),se=Object(d.b)(function(e){return{userRegister:e.userRegister}},{registerUser:ae})(ie),ce=function(e){return{type:"SET_LANG",payload:e}},le=function(e){return function(t){"hy"===e?h.a.locale("hy-am"):h.a.locale(e),fetch("/lang",{headers:new Headers({"Content-Language":e})}).then(function(e){return e.json()}).then(function(n){localStorage.setItem("lang",e),t(ce(n))}).catch(function(e){return console.log(e)})}},ue=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.getContentByLang;return o.a.createElement("ul",{className:"d-flex"},o.a.createElement(J.t,null,o.a.createElement(J.u,{className:"px-1",href:"#",onClick:function(){return e("hy")}},o.a.createElement("img",{src:n(54),height:"15px",width:"23px",alt:"arm"}))),o.a.createElement(J.t,null,o.a.createElement(J.u,{className:"px-1",href:"#",onClick:function(){return e("ru")}},o.a.createElement("img",{src:n(55),height:"15px",width:"23px",alt:"ru"}))),o.a.createElement(J.t,null,o.a.createElement(J.u,{className:"px-1",href:"#",onClick:function(){return e("en")}},o.a.createElement("img",{src:n(56),height:"15px",width:"23px",alt:"en"}))))}}]),t}(a.Component),me=Object(d.b)(null,{getContentByLang:le})(ue),de=["erevan","aragacotn","ararat","armavir","gexarkunik","kotayk","lori","shirak","syunik","tavush","vayoc_cor"],pe=[{city:"ashtarak",region:"aragacotn"},{city:"aparan",region:"aragacotn"},{city:"talin",region:"aragacotn"},{city:"ararat",region:"ararat"},{city:"artashat",region:"ararat"},{city:"masis",region:"ararat"},{city:"vedi",region:"ararat"},{city:"armavir",region:"armavir"},{city:"vaxarshapat",region:"armavir"},{city:"mecamor",region:"armavir"},{city:"gavar",region:"gexarkunik"},{city:"jambarak",region:"gexarkunik"},{city:"martuni",region:"gexarkunik"},{city:"sevan",region:"gexarkunik"},{city:"vardenis",region:"gexarkunik"},{city:"abovyan",region:"kotayk"},{city:"byurexavan",region:"kotayk"},{city:"exvard",region:"kotayk"},{city:"nor_hajn",region:"kotayk"},{city:"charencavan",region:"kotayk"},{city:"alaverdi",region:"lori"},{city:"axtala",region:"lori"},{city:"tumanyan",region:"lori"},{city:"shamlux",region:"lori"},{city:"spitak",region:"lori"},{city:"stepanavan",region:"lori"},{city:"tashir",region:"lori"},{city:"artik",region:"shirak"},{city:"gyumri",region:"shirak"},{city:"maralik",region:"shirak"},{city:"agarak",region:"syunik"},{city:"goris",region:"syunik"},{city:"dastakert",region:"syunik"},{city:"kapan",region:"syunik"},{city:"mexri",region:"syunik"},{city:"sisian",region:"syunik"},{city:"qajaran",region:"syunik"},{city:"ayrum",region:"tavush"},{city:"berd",region:"tavush"},{city:"dilijan",region:"tavush"},{city:"ijevan",region:"tavush"},{city:"noyemberyan",region:"tavush"},{city:"exegnacor",region:"vayoc_cor"},{city:"jermuk",region:"vayoc_cor"},{city:"vayq",region:"vayoc_cor"}],he=["katnamterq","msamterq","banjarexen","mirg","hataptux","chir_ev_charaz","pahaconer","kanachexen","tnkiner"],ye=[{subType:"panir",type:"katnamterq"},{subType:"kat",type:"katnamterq"},{subType:"garan_mis",type:"msamterq"},{subType:"khozi_mis",type:"msamterq"},{subType:"khncor",type:"mirg"},{subType:"tanc",type:"mirg"},{subType:"ciran",type:"mirg"},{subType:"khaxox",type:"mirg"},{subType:"khncoreni",type:"tnkiner"},{subType:"saloreni",type:"tnkiner"},{subType:"tanceni",type:"tnkiner"}],fe=function(e){return{type:"GET_SUM_OF_SUCCESS",payload:e}},be=function(e){return{type:"GET_SUM_OF_FAIL",payload:e}},ve=function(){return function(e){fetch("/getSumOf",{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){if(t.ok)return e(fe(t));throw new Error(t.errors||"Something wrong")}).catch(function(t){console.error(t),e(be(t))})}},Ee=function(){return{type:"GET_DEMANDS_START_FETCHING"}},Oe=function(e){return{type:"GET_DEMANDS_SUCCESS",payload:e}},ge=function(e){return{type:"GET_DEMANDS_FAIL",payload:e}},ke=function(e,t){return function(n){var a=t||"a";n(Ee()),fetch("/getDemands/".concat(a,"?skip=").concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(e.ok)return n(Oe(e));throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(ge(e))})}},je=function(){return{type:"GET_PROPSALS_START_FETCHING"}},_e=function(e){return{type:"GET_PROPOSALS_SUCCESS",payload:e}},Se=function(e){return{type:"GET_PROPOSALS_FAIL",payload:e}},Ne=function(e,t){return function(n){n(je()),fetch("/getProposals/".concat(t||"a","?skip=").concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(e.ok)return n(_e(e));throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(Se(e))})}},we=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).regions=[],n.regions_cities=[],n.types=[],n.types_subTypes=[],n.state={regions:[],regions_cities:[],types:[],types_subTypes:[],resetBtns:{region:!1,city:!1,type:!1,subType:!1}},n.focus=n.focus.bind(Object(q.a)(Object(q.a)(n))),n.mouseOver=n.mouseOver.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.getSumOfAction()},0),this.regions=de,this.regions_cities=pe,this.types=he,this.types_subTypes=ye,this.setState({regions:this.regions,regions_cities:this.regions_cities,types:this.types,types_subTypes:this.types_subTypes})}},{key:"mouseOver",value:function(e){e.focus();e.parentElement.addEventListener("mouseleave",function e(t){var n=t.target,a=n.querySelector("input"),o=n.querySelector("ul");a.blur(),o.style.display="none",n.removeEventListener("mouseleave",e)})}},{key:"focus",value:function(e){e.parentElement.querySelector("ul").style.display="block"}},{key:"keyUp",value:function(e){var t=e.value.toLowerCase(),n=e.name;return t?this.setState({resetBtns:Object(B.a)({},n,!0)}):(this.setState({resetBtns:Object(B.a)({},n,!1)}),this.props.deleteFilter(n)),"region"===n?this.filterRegionOrType(t,"regions"):"city"===n?this.filterCity(t):"type"===n?this.filterRegionOrType(t,"types"):"subType"===n?this.filterSubType(t):void 0}},{key:"clickOnRegion",value:function(e){this.setInputValue(e);var t=e.dataset.en;this.filterCityByRegion(t)}},{key:"clickOnCity",value:function(e){this.setInputValue(e);var t=e.dataset.region,n=document.querySelector('input[name="region"]');n.value=this.props.content.regions[t],n.dataset.en=t}},{key:"clickOnType",value:function(e){this.setInputValue(e);var t=e.dataset.en;this.filterSubTypeByType(t)}},{key:"clickOnSubType",value:function(e){this.setInputValue(e);var t=e.dataset.type,n=document.querySelector('input[name="type"]');n.value=this.props.content.types[t],n.dataset.en=t}},{key:"setInputValue",value:function(e){var t=this.props,n=t.skip_demand,a=t.count_demand,o=t.isFetchingGet_demand,r=t.linkToCachedAll_demand,i=t.getDemandsAction,s=t.skip_proposal,c=t.count_proposal,l=t.isFetchingGet_proposal,u=t.linkToCachedAll_proposal,m=t.getProposalsAction,d=t.addFilter,p=e.firstChild.data,h=e.parentElement.parentElement.querySelector("input"),y=Object(E.a)({},this.state.resetBtns);y[h.name]=!0,this.setState({resetBtns:y});var f=e.dataset.en;h.value=p,h.dataset.en=f,n<a&&!o&&i(n,r),s<c&&!l&&m(s,u),d(Object(B.a)({},h.name,f))}},{key:"resetValue",value:function(e){var t=e.parentElement.parentElement.querySelector("input");t.value="",this.resetFilter(t.name)}},{key:"resetFilter",value:function(e){this.props.deleteFilter(e);var t=Object(E.a)({},this.state.resetBtns);return t[e]=!1,"region"===e?this.setState({regions:this.regions,regions_cities:this.regions_cities,resetBtns:t}):"city"===e?this.setState({regions_cities:this.regions_cities,resetBtns:t}):"type"===e?this.setState({types:this.types,types_subTypes:this.types_subTypes,resetBtns:t}):"subType"===e?this.setState({types_subTypes:this.types_subTypes,resetBtns:t}):void 0}},{key:"filterRegionOrType",value:function(e,t){var n=this.props.content[t],a=this[t].filter(function(t){return t.includes(e)||n[t].toLowerCase().includes(e)});this.setState(Object(B.a)({},t,a))}},{key:"filterCity",value:function(e){var t=this.props.content.cities,n=this.regions_cities.filter(function(n){return n.city.includes(e)||t[n.city].toLowerCase().includes(e)});this.setState({regions_cities:n})}},{key:"filterSubType",value:function(e){var t=this.props.content.subTypes,n=this.types_subTypes.filter(function(n){return n.subType.includes(e)||t[n.subType].toLowerCase().includes(e)});this.setState({types_subTypes:n})}},{key:"filterCityByRegion",value:function(e){var t=this.regions_cities.filter(function(t){return t.region===e});this.setState({regions_cities:t})}},{key:"filterSubTypeByType",value:function(e){var t=this.types_subTypes.filter(function(t){return t.type===e});this.setState({types_subTypes:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,a=t.common,r=t.sumOf,i=function(e){var t=e.sumOfType,n=e.referer;return o.a.createElement("span",null,o.a.createElement(J.a,{color:"success"},t[n].proposal),o.a.createElement(J.a,{color:"danger"},t[n].demand))},s=function(){return o.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(t){return e.resetValue(t.target)}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))};return o.a.createElement("div",{className:"Filter my-4 mx-2"},o.a.createElement("div",{className:"d-flex justify-content-around"},o.a.createElement("div",{className:"position-relative"},this.state.resetBtns.region?o.a.createElement(s,null):null,o.a.createElement(J.m,{name:"region",type:"text",placeholder:a.region,onMouseOver:function(t){return e.mouseOver(t.target)},onFocus:function(t){return e.focus(t.target)},onKeyUp:function(t){return e.keyUp(t.target)}}),o.a.createElement(J.o,{style:{display:"none"},className:"select"},this.state.regions.map(function(t){return o.a.createElement(J.p,{key:t,className:"d-flex justify-content-between","data-en":t,onClick:function(t){return e.clickOnRegion(t.target)}},n.regions[t],o.a.createElement(i,{sumOfType:r.region,referer:t}))}))),o.a.createElement("div",{className:"position-relative"},this.state.resetBtns.city?o.a.createElement(s,null):null,o.a.createElement(J.m,{name:"city",type:"text",placeholder:a.city,onMouseOver:function(t){return e.mouseOver(t.target)},onFocus:function(t){return e.focus(t.target)},onKeyUp:function(t){return e.keyUp(t.target)}}),o.a.createElement(J.o,{style:{display:"none"},className:"select"},this.state.regions_cities.map(function(t){return o.a.createElement(J.p,{key:t.city,className:"d-flex justify-content-between","data-en":t.city,"data-region":t.region,onClick:function(t){return e.clickOnCity(t.target)}},n.cities[t.city],o.a.createElement(i,{sumOfType:r.city,referer:t.city}))}))),o.a.createElement("div",{className:"position-relative"},this.state.resetBtns.type?o.a.createElement(s,null):null,o.a.createElement(J.m,{name:"type",type:"text",placeholder:a.type,onMouseOver:function(t){return e.mouseOver(t.target)},onFocus:function(t){return e.focus(t.target)},onKeyUp:function(t){return e.keyUp(t.target)}}),o.a.createElement(J.o,{style:{display:"none"},className:"select"},this.state.types.map(function(t){return o.a.createElement(J.p,{key:t,className:"d-flex justify-content-between","data-en":t,onClick:function(t){return e.clickOnType(t.target)}},n.types[t],o.a.createElement(i,{sumOfType:r.type,referer:t}))}))),o.a.createElement("div",{className:"position-relative"},this.state.resetBtns.subType?o.a.createElement(s,null):null,o.a.createElement(J.m,{name:"subType",type:"text",placeholder:a.subType,onMouseOver:function(t){return e.mouseOver(t.target)},onFocus:function(t){return e.focus(t.target)},onKeyUp:function(t){return e.keyUp(t.target)}}),o.a.createElement(J.o,{style:{display:"none"},className:"select"},this.state.types_subTypes.map(function(t){return o.a.createElement(J.p,{key:t.subType,className:"d-flex justify-content-between","data-en":t.subType,"data-type":t.type,onClick:function(t){return e.clickOnSubType(t.target)}},n.subTypes[t.subType],o.a.createElement(i,{sumOfType:r.subType,referer:t.subType}))})))))}}]),t}(a.Component),Ae=Object(d.b)(function(e){return{content:e.content.Filter,common:e.content.common,sumOf:e.sumOf,skip_demand:e.demands.skip,count_demand:e.demands.count,isFetchingGet_demand:e.demands.isFetchingGet,linkToCachedAll_demand:e.demands.linkToCachedAll,skip_proposal:e.proposals.skip,count_proposal:e.proposals.count,isFetchingGet_proposal:e.proposals.isFetchingGet,linkToCachedAll_proposal:e.proposals.linkToCachedAll}},{getSumOfAction:ve,addFilter:function(e){return{type:"ADD_FILTER",payload:e}},deleteFilter:function(e){return{type:"DELETE_FILTER",payload:e}},getDemandsAction:ke,getProposalsAction:Ne})(we),Ie=n(17),Te=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.date,t=h()(e).format("DD MMMM YYYY");return o.a.createElement("span",null,t)}}]),t}(a.Component),Ce=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.date;return o.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},o.a.createElement("small",null,t),o.a.createElement(Te,{date:n}))}}]),t}(a.Component),Fe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,a=e.cFF,r=e.subType,i=e.unit,s=e.price;return o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("span",null,a.subTypes[r]),o.a.createElement("span",null,o.a.createElement("small",{className:"text-muted"},"1 ",t.units[i])," ".concat(s,"  "),o.a.createElement("img",{alt:"AMD",src:n(57)})))}}]),t}(a.Component),De=Object(d.b)(function(e){return{cFF:e.content.Filter,common:e.content.common}})(Fe),Le=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.cFF,a=e.city;return o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("span",null,n.cities[a]),o.a.createElement("small",{className:"text-muted"},t.city))}}]),t}(a.Component),Me=Object(d.b)(function(e){return{common:e.content.common,cFF:e.content.Filter}})(Le),xe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e="className"in this.props?this.props.className:"";return o.a.createElement("div",{className:"d-flex align-items-center",style:{minHeight:"100%"}},o.a.createElement("div",{className:"vertical_divider ".concat(e)}))}}]),t}(a.Component),Be=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.plan_to_have_quantity,a=e.plan_to_have_price,r=e.year,i=e.month,s=e.day,c=i?h()().localeData().months()[i-1]:"";return o.a.createElement(o.a.Fragment,null,o.a.createElement(xe,null),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("small",null,n),o.a.createElement("small",{className:"text-muted"},t.quantity)),o.a.createElement(xe,{className:"mx-3"}),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("small",null,a),o.a.createElement("small",{className:"text-muted"},t.price)),o.a.createElement(xe,{className:"mx-3"}),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("small",null,"".concat(s," ").concat(c," ").concat(r)),o.a.createElement("small",{className:"text-muted"},t.when))),o.a.createElement("small",{className:"text-muted"},"Planavorum em unenal")))}}]),t}(a.Component),Pe=Object(d.b)(function(e){return{common:e.content.common}})(Be),Re=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.plan_to_have_quantity,a=e.plan_to_have_price,r=e.continuousType,i=e.frequencyNum,s=t[r].toLowerCase(),c=localStorage.lang;return o.a.createElement(o.a.Fragment,null,o.a.createElement(xe,null),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("small",null,n),o.a.createElement("small",{className:"text-muted"},t.quantity)),o.a.createElement(xe,{className:"mx-3"}),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("small",null,a),o.a.createElement("small",{className:"text-muted"},t.price)),o.a.createElement(xe,{className:"mx-3"}),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement(function(){var e="1"===i?"ru"===c?"week"===r?"\u041a\u0430\u0436\u0434\u0443\u044e \u043d\u0435\u0434\u0435\u043b\u044e":"\u041a\u0430\u0436\u0434\u044b\u0439 ".concat(s):"en"===c?"Every ".concat(s):"\u0531\u0574\u0565\u0576 ".concat(s):"ru"===c?"\u041a\u0430\u0436\u0434\u044b\u0435 ".concat(i,"day"===r?" \u0434\u043d\u044f":"week"===r?" \u043d\u0435\u0434\u0435\u043b\u0438":" \u043c\u0435\u0441\u044f\u0446\u0430"):"en"===c?"Every ".concat(i," ").concat(s,"s"):"\u0531\u0574\u0565\u0576 ".concat(i," ").concat(s,"\u0568 \u0574\u0565\u056f");return o.a.createElement("small",null,e)},null),o.a.createElement("small",{className:"text-muted"},t.frequency))),o.a.createElement("small",{className:"text-muted"},"Planavorum em unenal")))}}]),t}(a.Component),Ge=Object(d.b)(function(e){return{common:e.content.common}})(Re),Ye=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.proposal,a=e.proposal,r=a.is_plan_to_have,i=a.oneTime,s=a.continuous,c=a.plan_to_have_quantity,l=a.plan_to_have_price;return o.a.createElement("div",{className:"d-flex justify-content-around",style:{height:"57px"}},o.a.createElement(Me,{city:n.city}),o.a.createElement(xe,null),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("span",null,n.available_quantity),o.a.createElement("small",{className:"text-muted"},t.available_quantity)),o.a.createElement(function(){if(r){if(i){var e=n.year,t=n.month,a="day"in n?n.day:"";return o.a.createElement(Pe,{plan_to_have_quantity:c,plan_to_have_price:l,year:e,month:t,day:a})}if(s){var u=n.continuousType,m=n.frequencyNum;return o.a.createElement(Ge,{plan_to_have_quantity:c,plan_to_have_price:l,continuousType:u,frequencyNum:m})}}return null},null))}}]),t}(a.Component),Ue=Object(d.b)(function(e){return{common:e.content.common}})(Ye),qe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.email,r=e.phone,i=e.yourName;return o.a.createElement("div",{className:"Contacts"},o.a.createElement("div",{className:"d-flex justify-content-around"},o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("span",null,i),o.a.createElement("small",{className:"text-muted"},t.username)),n?o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("span",null,n),o.a.createElement("small",{className:"text-muted"},t.email))):"",r?o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("span",null,r),o.a.createElement("small",{className:"text-muted"},t.phone))):""))}}]),t}(a.Component),Ve=Object(d.b)(function(e){return{common:e.content.common}})(qe);function Ze(e){this.e=e}function We(e){var t=this;if(e.stopPropagation(),e.preventDefault(),!this.state.isContactsOpen){this.isMouseMove=!1,setTimeout(function(){t.setState({isContactsOpen:!0})},250);var n=new Ze(e).getXY(),a=n.x,o=n.y;a<this.x_1_3?(this.card.style.transform="rotateY(-180deg)",setTimeout(function(){t.card.querySelector(".Contacts").style.transform="rotateY(180deg)"},250)):a>2*this.x_1_3?(this.card.style.transform="rotateY(180deg)",setTimeout(function(){t.card.querySelector(".Contacts").style.transform="rotateY(-180deg)"},250)):o<this.y_1_2?(this.card.style.transform="rotateX(180deg)",setTimeout(function(){t.card.querySelector(".Contacts").style.transform="rotateX(-180deg)"},250)):(this.card.style.transform="rotateX(-180deg)",setTimeout(function(){t.card.querySelector(".Contacts").style.transform="rotateX(-180deg)"},250)),this.card.style.boxShadow="0px 0px 10px 2px rgb(193, 193, 193)"}}function He(e){e.stopPropagation(),e.preventDefault();var t=new Ze(e).getXY(),n=t.x,a=t.y;n<this.x_1_3?(this.card.style.transform="rotateY(7deg)",this.card.style.boxShadow="-3px 0px 10px 2px rgb(193, 193, 193)"):n>2*this.x_1_3?(this.card.style.boxShadow="3px 0px 10px 2px rgb(193, 193, 193)",this.card.style.transform="rotateY(-7deg)"):a<this.y_1_3?(this.card.style.transform="rotateX(-7deg)",this.card.style.boxShadow="0px -2px 10px 2px rgb(193, 193, 193)"):a>2*this.y_1_3?(this.card.style.transform="rotateX(7deg)",this.card.style.boxShadow="0px 3px 10px 2px rgb(193, 193, 193)"):(this.card.style.transform="rotateX(0deg) rotateY(0deg)",this.card.style.boxShadow="0px 0px 10px 2px rgb(193, 193, 193)")}Ze.prototype.getXY=function(){var e=this.e.pageX,t=this.e.pageY-window.scrollY,n=this.e.target.getBoundingClientRect(),a=n.left,o=n.top;return{x:Math.ceil(e-a),y:Math.ceil(t-o)}};var Je=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).isMouseMove=!0,n.state={isContactsOpen:!1},n.handleMouseMove=n.handleMouseMove.bind(Object(q.a)(Object(q.a)(n))),n.handleMouseLeave=n.handleMouseLeave.bind(Object(q.a)(Object(q.a)(n))),n.handleClick=We.bind(Object(q.a)(Object(q.a)(n))),n.mouseMoveCb=He.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.card=i.a.findDOMNode(this).nextElementSibling;var e=this.card.offsetHeight,t=this.card.offsetWidth;this.x_1_3=Math.ceil(t/3),this.y_1_2=Math.ceil(e/2),this.y_1_3=Math.ceil(e/3)}},{key:"handleMouseMove",value:function(e,t){this.isMouseMove&&t(e)}},{key:"handleMouseLeave",value:function(){var e=this;this.card.style.transform="rotateX(0deg) rotateY(0deg)",this.card.style.boxShadow="0px 0px 10px 2px rgb(193, 193, 193)",this.isMouseMove=!0,setTimeout(function(){e.setState({isContactsOpen:!1})},250)}},{key:"render",value:function(){var e=this,t=this.props.proposal,n=t.subType,r=t.price,i=t.unit,s=t.email,c=t.phone,l=t.yourName,u=t.comment,m=t.date,d=Object(Ie.a)(t,["subType","price","unit","email","phone","yourName","comment","date"]),p=this.state.isContactsOpen;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"position-absolute w-100 h-100",onMouseMove:function(t){return e.handleMouseMove(t,e.mouseMoveCb)},onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,style:{zIndex:"1"}}),o.a.createElement(J.c,null,o.a.createElement(J.d,null,p?o.a.createElement(Ve,{email:s,phone:c,yourName:l}):o.a.createElement(a.Fragment,null,o.a.createElement(De,{subType:n,unit:i,price:r}),o.a.createElement("hr",null),o.a.createElement(Ue,{proposal:d}),o.a.createElement("hr",null),o.a.createElement(Ce,{comment:u,date:m})))))}}]),t}(a.Component),ze=n(23),Xe=Object(ze.createSelector)(function(e){return e.proposals.proposals},function(e){return e.filterBy},function(e,t){return e.filter(function(e){return!t.region||e.region===t.region}).filter(function(e){return!t.city||e.city===t.city}).filter(function(e){return!t.type||e.type===t.type}).filter(function(e){return!t.subType||e.subType===t.subType})}),Qe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.skip;0===e&&this.props.getProposalsAction(e)}},{key:"render",value:function(){var e=this.props,t=e.proposals,n=e.isFetchingGet;return n&&0===t.length?o.a.createElement("div",null,"Loading..."):o.a.createElement(a.Fragment,null,t.map(function(e,t){return o.a.createElement("div",{className:"Proposal mb-5",key:t},o.a.createElement(Je,{proposal:e}))}),n?o.a.createElement("div",{style:{marginBottom:"10px"}},"Loading..."):"")}}]),t}(a.Component),Ke=Object(d.b)(function(e){return{proposals:Xe(e)}},{getProposalsAction:Ne})(Qe),$e=Object(ze.createSelector)(function(e){return e.demands.demands},function(e){return e.filterBy},function(e,t){return e.filter(function(e){return!t.region||e.region===t.region}).filter(function(e){return!t.city||e.city===t.city}).filter(function(e){return!t.type||e.type===t.type}).filter(function(e){return!t.subType||e.subType===t.subType})}),et=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.quantity;return o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("span",null,n),o.a.createElement("small",{className:"text-muted"},t))}}]),t}(a.Component),tt=Object(d.b)(function(e){return{content:e.content.common.quantity}})(et),nt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.year,a=e.month,r=e.day,i=e.quantity,s=a?h()().localeData().months()[a-1]:"";return o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("div",{className:"d-flex"},o.a.createElement(tt,{quantity:i}),o.a.createElement("div",{className:"d-flex align-items-center position-relative",style:{minHeight:"100%",whiteSpace:"nowrap"}},o.a.createElement("small",{className:"text-muted position-absolute",style:{top:"100%",left:"-100%"}},t.oneTime),o.a.createElement("div",{className:"vertical_divider mx-3"})),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("small",null,"".concat(r," ").concat(s," ").concat(n)),o.a.createElement("small",{className:"text-muted"},t.when)))))}}]),t}(a.Component),at=Object(d.b)(function(e){return{common:e.content.common}})(nt),ot=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.continuousType,a=e.frequencyNum,r=e.quantity,i=t[n].toLowerCase(),s=localStorage.lang;return o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement("div",{className:"d-flex"},o.a.createElement(tt,{quantity:r}),o.a.createElement("div",{className:"d-flex align-items-center position-relative",style:{minHeight:"100%"}},o.a.createElement("small",{className:"text-muted position-absolute",style:{top:"100%",left:"-100%"}},t.continuous),o.a.createElement("div",{className:"vertical_divider mx-3"})),o.a.createElement("div",{className:"d-flex flex-column justify-content-between align-items-center"},o.a.createElement(function(){var e="1"===a?"ru"===s?"week"===n?"\u041a\u0430\u0436\u0434\u0443\u044e \u043d\u0435\u0434\u0435\u043b\u044e":"\u041a\u0430\u0436\u0434\u044b\u0439 ".concat(i):"en"===s?"Every ".concat(i):"\u0531\u0574\u0565\u0576 ".concat(i):"ru"===s?"\u041a\u0430\u0436\u0434\u044b\u0435 ".concat(a,"day"===n?" \u0434\u043d\u044f":"week"===n?" \u043d\u0435\u0434\u0435\u043b\u0438":" \u043c\u0435\u0441\u044f\u0446\u0430"):"en"===s?"Every ".concat(a," ").concat(i,"s"):"\u0531\u0574\u0565\u0576 ".concat(a," ").concat(i,"\u0568 \u0574\u0565\u056f");return o.a.createElement("small",null,e)},null),o.a.createElement("small",{className:"text-muted"},t.frequency)))))}}]),t}(a.Component),rt=Object(d.b)(function(e){return{common:e.content.common}})(ot),it=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.demand,n=e.demand,a=n.quantity,r=n.oneTime,i=n.is_mark_the_date,s=n.continuous,c=n.city;return o.a.createElement("div",{className:"d-flex justify-content-around",style:{height:"57px"}},o.a.createElement(Me,{city:c}),o.a.createElement(xe,null),o.a.createElement(function(){if(r&&i){var e=t.year,n=t.month,c="day"in t?t.day:"";return o.a.createElement(at,{year:e,month:n,day:c,quantity:a})}if(s){var l=t.continuousType,u=t.frequencyNum;return o.a.createElement(rt,{continuousType:l,frequencyNum:u,quantity:a})}return o.a.createElement(tt,{quantity:a})},null))}}]),t}(a.Component),st=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).isMouseMove=!0,n.state={isContactsOpen:!1},n.handleMouseMove=n.handleMouseMove.bind(Object(q.a)(Object(q.a)(n))),n.handleMouseLeave=n.handleMouseLeave.bind(Object(q.a)(Object(q.a)(n))),n.handleClick=We.bind(Object(q.a)(Object(q.a)(n))),n.mouseMoveCb=He.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.card=i.a.findDOMNode(this).nextElementSibling;var e=this.card.offsetHeight,t=this.card.offsetWidth;this.x_1_3=Math.ceil(t/3),this.y_1_2=Math.ceil(e/2),this.y_1_3=Math.ceil(e/3)}},{key:"handleMouseMove",value:function(e,t){this.isMouseMove&&t(e)}},{key:"handleMouseLeave",value:function(){var e=this;this.card.style.transform="rotateX(0deg) rotateY(0deg)",this.card.style.boxShadow="0px 0px 10px 2px rgb(193, 193, 193)",this.isMouseMove=!0,setTimeout(function(){e.setState({isContactsOpen:!1})},250)}},{key:"render",value:function(){var e=this,t=this.props.demand,n=t.subType,r=t.price,i=t.unit,s=t.email,c=t.phone,l=t.yourName,u=t.comment,m=t.date,d=Object(Ie.a)(t,["subType","price","unit","email","phone","yourName","comment","date"]),p=this.state.isContactsOpen;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"position-absolute w-100 h-100",onMouseMove:function(t){return e.handleMouseMove(t,e.mouseMoveCb)},onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,style:{zIndex:"1"}}),o.a.createElement(J.c,null,o.a.createElement(J.d,null,p?o.a.createElement(Ve,{email:s,phone:c,yourName:l}):o.a.createElement(a.Fragment,null,o.a.createElement(De,{subType:n,unit:i,price:r}),o.a.createElement("hr",null),o.a.createElement(it,{demand:d}),o.a.createElement("hr",null),o.a.createElement(Ce,{comment:u,date:m})))))}}]),t}(a.Component),ct=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.skip;0===e&&this.props.getDemandsAction(e)}},{key:"render",value:function(){var e=this.props,t=e.demands,n=e.isFetchingGet;return n&&0===t.length?o.a.createElement("div",null,"Loading..."):o.a.createElement(a.Fragment,null,t.map(function(e,t){return o.a.createElement("div",{className:"Demand mb-5",key:t},o.a.createElement(st,{demand:e}))}),n?o.a.createElement("div",{style:{marginBottom:"10px"}},"Loading..."):"")}}]),t}(a.Component),lt=Object(d.b)(function(e){return{demands:$e(e)}},{getDemandsAction:ke})(ct),ut=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleScroll=n.handleScroll.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=this.props,t=e.skip_proposal,n=e.count_proposal,a=e.isFetchingGet_proposal,o=e.linkToCachedAll_proposal,r=e.skip_demand,i=e.count_demand,s=e.isFetchingGet_demand,c=e.linkToCachedAll_demand,l=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight,m=document.documentElement.clientHeight||window.innerHeight;Math.ceil(l+m)>=u&&(t<n&&!a&&this.props.getProposalsAction(t,o),r<i&&!s&&this.props.getDemandsAction(r,c))}},{key:"componentWillUnmount",value:function(){this.props.resetFilters(),window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.skip_proposal,n=e.isFetchingGet_proposal,a=e.skip_demand,r=e.isFetchingGet_demand;return o.a.createElement("div",null,o.a.createElement(Ae,null),o.a.createElement("div",{className:"mt-4 d-flex w-100"},o.a.createElement("div",{className:"proposal_demand_container"},o.a.createElement(Ke,{skip:t,isFetchingGet:n})),o.a.createElement("div",{className:"proposal_demand_container"},o.a.createElement(lt,{skip:a,isFetchingGet:r}))))}}]),t}(a.Component),mt=Object(d.b)(function(e){return{isFetchingGet_demand:e.demands.isFetchingGet,skip_demand:e.demands.skip,count_demand:e.demands.count,linkToCachedAll_demand:e.demands.linkToCachedAll,isFetchingGet_proposal:e.proposals.isFetchingGet,skip_proposal:e.proposals.skip,count_proposal:e.proposals.count,linkToCachedAll_proposal:e.proposals.linkToCachedAll}},{resetFilters:function(){return{type:"RESET_FILTERS"}},getDemandsAction:ke,getProposalsAction:Ne})(ut),dt=function(e,t){return function(n){var a=localStorage.getItem("access_token");fetch("/addNewProposal",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return n(yt(e.proposal)),t();throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(ft(e))})}},pt=function(){return function(e){e(ht())}},ht=function(){return{type:"SAVE_PROPOSAL_START_FETCHING"}},yt=function(e){return{type:"SAVE_PROPOSAL_SUCCESS",payload:[e]}},ft=function(e){return{type:"SAVE_PROPOSAL_FAIL",payload:e}},bt=(n(58),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.common,n=e.cFF,a=e.name,r=e.list,i=e.type,s=e.listName,c=e.match,l=e.onInput,u=e.onBlur,m=e.onFocus,d=e.onClick,p=e.isBlurred,h=e.isInvalidMsg;return o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:a},t[a]),o.a.createElement(J.m,{id:a,type:i,name:a,onFocus:m,onInput:l,onBlur:u,valid:p[a]&&""===h[a],invalid:p[a]&&""!==h[a]}),o.a.createElement(J.k,null,h[a]),o.a.createElement(J.o,{className:"d-none select"},r.map(function(e){return o.a.createElement(J.p,{key:e[a],className:"d-flex justify-content-between","data-en":e[a],"data-match":e[c],onClick:d},n[s][e[a]])})))}}]),t}(a.Component)),vt=Object(d.b)(function(e){return{common:e.content.common,cFF:e.content.Filter}})(bt),Et=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).list=[],n.childList=[],n.state={list:[],childList:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.list=this.props.list,this.childList=this.props.childList,this.setState({list:this.list,childList:this.childList})}},{key:"onInputFilterOwnAndChildLists",value:function(e){var t=new K(e).getNameValueLowerCased(),n=t.name,a=t.value,o="".concat(n,"s"),r=this.props.cFF[o],i=!0,s=!1,c="",l=this.list.filter(function(e){return c=r[e].toLowerCase(),i&&c===a&&(i=!1,s=e),e.includes(a)||c.includes(a)});if(this.setState({list:l}),s){var u=this.childList.filter(function(e){return e[n]===s});this.childList=u,this.setState({childList:u})}else this.childList=this.props.childList,this.setState({childList:this.childList})}},{key:"onInputFilterOwnList",value:function(e){var t=this,n=new K(e).getNameValueLowerCased(),a=n.name,o=n.value,r=this.props.cFF,i=this.props.childListName,s=!0,c="",l=this.childList.filter(function(e){if(c=r[i][e[a]].toLowerCase(),s&&c===o){s=!1;var n=Object.keys(e);t.props.setNameValue(a,e[a]),t.props.setNameValue(n[1],e[n[1]])}return e[a].includes(o)||c.includes(o)});this.setState({childList:l})}},{key:"render",value:function(){var e=this,t=this.props,n=t.common,r=t.cFF,i=t.name,s=t.type,c=t.listName,l=t.childName,u=t.childListName,m=t.onInput,d=t.onBlur,p=t.onFocus,h=t.onClick,y=t.isBlurred,f=t.isInvalidMsg;return o.a.createElement(a.Fragment,null,o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:i},n[i]),o.a.createElement(J.m,{id:i,type:s,name:i,onFocus:p,onInput:function(t){m(t),e.onInputFilterOwnAndChildLists(t)},onBlur:d}),o.a.createElement(J.o,{className:"d-none select"},this.state.list.map(function(e){return o.a.createElement(J.p,{key:e,className:"d-flex justify-content-between","data-en":e,onClick:h},r[c][e])}))),o.a.createElement(vt,{name:l,type:s,onFocus:p,onClick:h,onBlur:d,onInput:function(t){m(t),e.onInputFilterOwnList(t)},list:this.state.childList,listName:u,isBlurred:y,isInvalidMsg:f,match:i}))}}]),t}(a.Component),Ot=Object(d.b)(function(e){return{common:e.content.common,cFF:e.content.Filter}})(Et),gt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onFocus,n=e.onClick,a=e.onBlur,r=e.onInput,i=e.setNameValue,s=e.isBlurred,c=e.isInvalidMsg;return o.a.createElement("div",{className:"Filter my-4 d-flex justify-content-around"},o.a.createElement(Ot,{name:"region",type:"text",onFocus:t,onClick:n,onBlur:a,onInput:r,setNameValue:i,list:de,listName:"regions",isBlurred:s,isInvalidMsg:c,childName:"city",childList:pe,childListName:"cities"}),o.a.createElement(Ot,{name:"type",type:"text",onFocus:t,onClick:n,onBlur:a,onInput:r,setNameValue:i,list:he,listName:"types",isBlurred:s,isInvalidMsg:c,childName:"subType",childList:ye,childListName:"subTypes"}))}}]),t}(a.Component),kt=["kg","hat","gram","tonna"],jt=n(29),_t=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).e=e,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"focus",value:function(){var e=this;Object(jt.a)(Object(u.a)(t.prototype),"focus",this).call(this),this.getUl().classList.remove("d-none");this.e.target.parentElement.addEventListener("mouseleave",function n(a){var o=a.target,r=o.querySelector("input");o.querySelector("ul").classList.add("d-none"),o.removeEventListener("mouseleave",n),r.addEventListener("blur",Object(jt.a)(Object(u.a)(t.prototype),"blur",e).call(e)),r.blur()})}},{key:"getUl",value:function(){return this.e.target.parentElement.querySelector("ul")}}]),t}(K),St=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).list=[],n.state={list:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){for(var e=(new Date).getFullYear(),t=e;t<e+31;t++)this.list.push(t);this.setState({list:this.list})}},{key:"onInputFilterList",value:function(e){var t=new K(e).getValue(),n=this.list.filter(function(e){return String(e).includes(t)});this.setState({list:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.common,a=t.commonProps,r=a.onFocus,i=a.onBlur,s=a.onInput,c=a.onClick,l=a.isBlurred,u=a.isInvalidMsg;return o.a.createElement(J.l,{className:"jumperLabel mr-5"},o.a.createElement(J.n,{for:"year"},n.year),o.a.createElement(J.m,{id:"year",type:"text",name:"year",onFocus:r,onInput:function(t){s(t),e.onInputFilterList(t)},onBlur:i,valid:l.year&&""===u.year,invalid:l.year&&""!==u.year}),o.a.createElement(J.k,null,u.year),o.a.createElement(J.o,{className:"d-none select"},this.state.list.map(function(e){return o.a.createElement(J.p,{key:e,onClick:c},e)})))}}]),t}(a.Component),Nt=Object(d.b)(function(e){return{common:e.content.common}})(St),wt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).list=[],n.state={list:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.list=h()().localeData().months(),this.setState({list:this.list})}},{key:"onInputFilterList",value:function(e){var t=this,n=new K(e).getNameValue(),a=n.name,o=n.value,r=!0,i="",s=this.list.filter(function(e,n){return i=e.toLowerCase(),(r&&i===o||String(n+1)===o)&&(r=!1,t.props.commonProps.setNameValue(a,n+1)),String(n+1)===o||i.includes(o)});this.setState({list:s})}},{key:"render",value:function(){var e=this,t=this.props,n=t.common,a=t.commonProps,r=a.onFocus,i=a.onBlur,s=a.onInput,c=a.onClick,l=a.isBlurred,u=a.isInvalidMsg;return o.a.createElement(J.l,{className:"jumperLabel mr-5"},o.a.createElement(J.n,{for:"month"},n.month),o.a.createElement(J.m,{id:"month",type:"text",name:"month",onFocus:r,onInput:function(t){s(t),e.onInputFilterList(t)},onBlur:i,valid:l.month&&""===u.month,invalid:l.month&&""!==u.month}),o.a.createElement(J.k,null,u.month),o.a.createElement(J.o,{className:"d-none select"},this.state.list.map(function(e,t){return o.a.createElement(J.p,{key:t,"data-en":t+1,onClick:c},e)})))}}]),t}(a.Component),At=Object(d.b)(function(e){return{common:e.content.common}})(wt),It=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={lastDay:31},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.year,n=e.month;if(t&&n){var a=h()("".concat(t,"-").concat(n),"YYYY-MM").daysInMonth();this.setState({lastDay:a})}}},{key:"generateDays",value:function(e){for(var t=[],n=1;n<=e;n++)t.push(n);return t}},{key:"render",value:function(){var e=this.props,t=e.common,n=e.commonProps,a=n.onFocus,r=n.onBlur,i=n.onInput,s=n.onClick,c=this.generateDays(this.state.lastDay);return o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:"day"},t.day),o.a.createElement(J.m,{id:"day",type:"text",name:"day",onFocus:a,onInput:i,onBlur:r}),o.a.createElement(J.o,{className:"d-none select"},c.map(function(e){return o.a.createElement(J.p,{key:e,onClick:s},e)})))}}]),t}(a.Component),Tt=Object(d.b)(function(e){return{common:e.content.common}})(It),Ct=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).frequencyNums=[],n.state={lastNumber:6},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=6,n=e.continuousType;"week"===n?t=3:"month"===n&&(t=12),this.setState({lastNumber:t})}},{key:"generateFrequencyNums",value:function(e){for(var t=[],n=1;n<=e;n++)t.push(n);return t}},{key:"render",value:function(){var e=this.props,t=e.common,n=e.onClickOnRadioContinuousType,a=e.continuousType,r=e.commonProps,i=r.onFocus,s=r.onBlur,c=r.onInput,l=r.onClick,u=r.isBlurred,m=r.isInvalidMsg,d=this.generateFrequencyNums(this.state.lastNumber);return o.a.createElement(o.a.Fragment,null,o.a.createElement(J.l,{className:"d-flex"},o.a.createElement(J.l,{check:!0,className:"mr-5"},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"continuous",value:"day",defaultChecked:"true",onClick:n}),t.day)),o.a.createElement(J.l,{check:!0,className:"mr-5"},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"continuous",value:"week",onClick:n}),t.week)),o.a.createElement(J.l,{check:!0},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"continuous",value:"month",onClick:n}),t.month))),o.a.createElement(J.l,{className:"jumperLabel",style:{maxWidth:"30%"}},o.a.createElement(J.n,{for:"frequencyNum"},t[a]),o.a.createElement(J.m,{id:"frequencyNum",type:"text",name:"frequencyNum",onFocus:i,onInput:c,onBlur:s,valid:u.frequencyNum&&""===m.frequencyNum,invalid:u.frequencyNum&&""!==m.frequencyNum}),o.a.createElement(J.k,null,m.frequencyNum),o.a.createElement(J.o,{className:"d-none select"},d.map(function(e){return o.a.createElement(J.p,{key:e,onClick:l},e)}))))}}]),t}(a.Component),Ft=Object(d.b)(function(e){return{common:e.content.common}})(Ct),Dt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).list=[],n.state={list:[]},n.onInputFilterList=n.onInputFilterList.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.list=this.props.list,this.setState({list:this.list})}},{key:"onInputFilterList",value:function(e){var t=this,n=new K(e).getNameValue(),a=n.name,o=n.value,r="".concat(a,"s"),i=this.props.common[r],s=!0,c="",l=this.list.filter(function(e){return c=i[e].toLowerCase(),s&&c===o&&(s=!1,t.props.commonProps.setNameValue(a,e)),e.includes(o)||c.includes(o)});this.setState({list:l})}},{key:"render",value:function(){var e=this,t=this.props,n=t.common,a=t.name,r=t.type,i=t.listName,s=t.commonProps,c=s.onInput,l=s.onBlur,u=s.onFocus,m=s.onClick,d=s.isBlurred,p=s.isInvalidMsg;return o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:a},n[a]),o.a.createElement(J.m,{id:a,type:r,name:a,onFocus:u,onInput:function(t){c(t),e.onInputFilterList(t)},onBlur:l,valid:d[a]&&""===p[a],invalid:d[a]&&""!==p[a]}),o.a.createElement(J.k,null,p[a]),o.a.createElement(J.o,{className:"d-none select"},this.state.list.map(function(e){return o.a.createElement(J.p,{key:e,"data-en":e,onClick:m},n[i][e])})))}}]),t}(a.Component),Lt=Object(d.b)(function(e){return{common:e.content.common}})(Dt),Mt=function(){function e(t){Object(s.a)(this,e),this.target=t.target}return Object(c.a)(e,[{key:"click",value:function(){var e=this.getInput();e.dataset.en=this.target.dataset.en,e.value=this.target.innerText;var t=new Event("input",{bubbles:!0});e.dispatchEvent(t)}},{key:"getInput",value:function(){return this.target.parentElement.parentElement.querySelector("input")}}]),e}(),xt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).units=kt,n.state={email:"",price:"",unit:"",available_quantity:"",yourName:"",phone:"",comment:"",plan_to_have_quantity:"",plan_to_have_price:"",city:"",subType:"",year:"",month:"",day:"",is_plan_to_have:!1,oneTime:!0,continuous:!1,continuousType:"day",frequencyNum:"",isBlurred:{city:!1,subType:!1,price:!1,unit:!1,available_quantity:!1,yourName:!1,email:!1,phone:!1,comment:!1},isInvalidMsg:{city:"",subType:"",price:"",unit:"",available_quantity:"",yourName:"",email:"",phone:"",comment:""}},n.handleFocusOnInput=n.handleFocusOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleBlurOnInput=n.handleBlurOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleInputOnInput=n.handleInputOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleFocusOnDropdownInput=n.handleFocusOnDropdownInput.bind(Object(q.a)(Object(q.a)(n))),n.handleClickOnDropdownListItem=n.handleClickOnDropdownListItem.bind(Object(q.a)(Object(q.a)(n))),n.handleBlurOnDropdownListItem=n.handleBlurOnDropdownListItem.bind(Object(q.a)(Object(q.a)(n))),n.toggleIsPlanToHave=n.toggleIsPlanToHave.bind(Object(q.a)(Object(q.a)(n))),n.clickOnRadio=n.clickOnRadio.bind(Object(q.a)(Object(q.a)(n))),n.clickOnRadioContinuousType=n.clickOnRadioContinuousType.bind(Object(q.a)(Object(q.a)(n))),n.validate=n.validate.bind(Object(q.a)(Object(q.a)(n))),n.setNameValue=n.setNameValue.bind(Object(q.a)(Object(q.a)(n))),n.onSubmit=n.onSubmit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.editMode){var t=function(e){var t=e.parentElement;t.classList.add("jump"),t.classList.remove("jumpCancel")},n=function(e,t){t&&S.push({name:e,value:t})},a=this.props.proposal,o=a.price,r=a.unit,i=a.available_quantity,s=a.email?a.email:"",c=a.phone?a.phone:"",l=a.comment?a.comment:"",u=a.is_plan_to_have?a.plan_to_have_quantity:"",m=a.is_plan_to_have?a.plan_to_have_price:"",d=a.is_plan_to_have&&a.oneTime?a.year:"",p=a.is_plan_to_have&&a.oneTime?a.month:"",h=a.is_plan_to_have&&a.oneTime&&a.day?a.day:"",y=a.region,f=a.city,b=a.type,v=a.is_plan_to_have,E=a.subType,O=a.oneTime,g=a.continuous,k=a.continuous?a.continuousType:"day",j=a.continuous?a.frequencyNum:"";this.setState({price:o,unit:r,available_quantity:i,email:s,phone:c,comment:l,year:d,month:p,day:h,region:y,city:f,type:b,subType:E,is_plan_to_have:v,oneTime:O,continuous:g,continuousType:k,frequencyNum:j,plan_to_have_quantity:u,plan_to_have_price:m,date:a.date,_id:a._id,user_id:a.user_id});var _=document.querySelector("form.add_proposal"),S=[{name:"price",value:o},{name:"available_quantity",value:i}];n("email",s),n("phone",c),n("comment",l),n("year",d),n("month",p),n("day",h),n("frequencyNum",j),n("plan_to_have_quantity",u),n("plan_to_have_price",m),function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){var n=_.querySelector("#".concat(e.name));n.value=[e.value],t(n)})}(S);!function(n){n.forEach(function(n){var a=_.querySelector("#".concat(n.name));a.dataset.en=n.value,a.value=e.props.cFF[n.listName][n.value],t(a)})}([{name:"region",listName:"regions",value:y},{name:"city",listName:"cities",value:f},{name:"type",listName:"types",value:b},{name:"subType",listName:"subTypes",value:E}]);var N=_.querySelector("#unit");N.dataset.en=r,N.value=this.props.common.units[r],t(N),v&&(_.querySelector("#is_plan_to_have").checked=!0,g&&(_.querySelector('input[value="continuous"]').checked=!0,"day"===k?_.querySelector('input[value="day"]').checked=!0:"week"===k?_.querySelector('input[value="week"]').checked=!0:_.querySelector('input[value="month"]').checked=!0))}}},{key:"clickOnRadio",value:function(e){var t=e.target.value;if(!this.state[t]){var n=Object(E.a)({},this.state.isBlurred),a=Object(E.a)({},this.state.isInvalidMsg);"continuous"===t?(delete n.year,delete n.month,delete a.year,delete a.month,n.frequencyNum=!1,a.frequencyNum="",this.setState({oneTime:!1,continuous:!0,isBlurred:n,isInvalidMsg:a})):(delete n.frequencyNum,delete a.frequencyNum,n.year=!1,n.month=!1,a.year="",a.month="",this.setState({oneTime:!0,continuous:!1,isBlurred:n,isInvalidMsg:a}))}}},{key:"clickOnRadioContinuousType",value:function(e){var t=e.target.value;this.setState({continuousType:t})}},{key:"toggleIsPlanToHave",value:function(){var e=Object(E.a)({},this.state.isBlurred),t=Object(E.a)({},this.state.isInvalidMsg);this.state.is_plan_to_have?(delete e.plan_to_have_price,delete e.plan_to_have_quantity,delete t.plan_to_have_price,delete t.plan_to_have_quantity,delete e.year,delete e.month,delete t.year,delete t.month,delete e.frequencyNum,delete t.frequencyNum,this.setState({is_plan_to_have:!1,isBlurred:e,isInvalidMsg:t})):(e.plan_to_have_price=!1,e.plan_to_have_quantity=!1,t.plan_to_have_price="",t.plan_to_have_quantity="",this.state.oneTime?(e.year=!1,e.month=!1,t.year="",t.month=""):(e.frequencyNum=!1,t.frequencyNum=""),this.setState({is_plan_to_have:!0,isBlurred:e,isInvalidMsg:t}))}},{key:"handleFocusOnInput",value:function(e){new K(e).focus()}},{key:"handleBlurOnInput",value:function(e){var t=new K(e);t.blur();var n=t.getNameValue(),a=n.name,o=n.value;this.setIsBlurredTrue(a),this.validate(a,o)}},{key:"handleInputOnInput",value:function(e){var t=new K(e),n=t.getNameValue(),a=n.name,o=n.value,r=t.getDatasetEn();this.state.isBlurred[a]&&this.validate(a,o),this.setNameValue(a,r||o)}},{key:"handleFocusOnDropdownInput",value:function(e){new _t(e).focus()}},{key:"handleClickOnDropdownListItem",value:function(e){var t=new Mt(e);t.click();var n=t.getInput();this.setIsInvalidMsgByNameToEmpty(n.name)}},{key:"handleBlurOnDropdownListItem",value:function(e){var t=new K(e);if(t.checkListIsClosed()){var n=t.getNameValue(),a=n.name,o=n.value;this.setIsBlurredTrue(a),this.validate(a,o)}}},{key:"onSubmit",value:function(e){if(e.preventDefault(),!this.validateAll()){var t=this.state,n=(t.isBlurred,t.isInvalidMsg,Object(Ie.a)(t,["isBlurred","isInvalidMsg"]));this.props.submit(n)}}},{key:"setIsBlurredTrue",value:function(e){var t=Object(E.a)({},this.state.isBlurred);t[e]=!0,this.setState({isBlurred:t})}},{key:"setIsInvalidMsgByNameToEmpty",value:function(e){var t=Object(E.a)({},this.state.isInvalidMsg);t[e]="",this.setState({isInvalidMsg:t})}},{key:"setNameValue",value:function(e,t){this.setState(Object(B.a)({},e,t))}},{key:"render",value:function(){var e=this.props,t=e.common,n=e.isFetchingAddNew,a=this.state,r=a.isInvalidMsg,i=a.isBlurred,s=Object(Ie.a)(a,["isInvalidMsg","isBlurred"]),c={onFocus:this.handleFocusOnInput,onBlur:this.handleBlurOnInput,onInput:this.handleInputOnInput,isBlurred:i,isInvalidMsg:r},l={onFocus:this.handleFocusOnDropdownInput,onClick:this.handleClickOnDropdownListItem,onBlur:this.handleBlurOnDropdownListItem,onInput:this.handleInputOnInput,setNameValue:this.setNameValue,isBlurred:i,isInvalidMsg:r};return o.a.createElement(J.j,{className:"add_proposal"},o.a.createElement(gt,{onFocus:this.handleFocusOnDropdownInput,onClick:this.handleClickOnDropdownListItem,onBlur:this.handleBlurOnDropdownListItem,onInput:this.handleInputOnInput,setNameValue:this.setNameValue,isBlurred:i,isInvalidMsg:r}),o.a.createElement("div",{className:"mt-4 d-flex justify-content-around"},o.a.createElement("div",{className:"position-relative w-50"},o.a.createElement("div",{className:"Proposal proposal_demand_container position-fixed"},o.a.createElement(Je,{proposal:s}))),o.a.createElement("div",{className:"w-50"},o.a.createElement(J.e,{className:"mx-auto my-4"},o.a.createElement(re,{name:"price",type:"number",commonProps:c}),o.a.createElement(Lt,{name:"unit",type:"text",commonProps:l,list:kt,listName:"units"}),o.a.createElement(re,{name:"available_quantity",type:"number",commonProps:c}),o.a.createElement(J.l,{check:!0,className:"mb-3"},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{id:"is_plan_to_have",type:"checkbox",onChange:this.toggleIsPlanToHave})," ",t.plan_to_have)),o.a.createElement(J.f,{isOpen:this.state.is_plan_to_have},o.a.createElement(re,{name:"plan_to_have_quantity",type:"number",contentName:"quantity",commonProps:c}),o.a.createElement(re,{name:"plan_to_have_price",type:"number",contentName:"price",commonProps:c}),o.a.createElement(J.l,{className:"d-flex"},o.a.createElement(J.l,{check:!0,className:"mr-5"},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"plan_to_have_radio",value:"oneTime",defaultChecked:"true",onClick:this.clickOnRadio}),t.oneTime)),o.a.createElement(J.l,{check:!0},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"plan_to_have_radio",value:"continuous",onClick:this.clickOnRadio}),t.continuous))),o.a.createElement(J.l,{className:this.state.oneTime?"d-flex":"d-none"},o.a.createElement(Nt,{commonProps:l}),o.a.createElement(At,{commonProps:l}),o.a.createElement(Tt,{commonProps:l,year:this.state.year,month:this.state.month})),o.a.createElement(J.l,{className:this.state.continuous?"":"d-none"},o.a.createElement(Ft,{commonProps:l,onClickOnRadioContinuousType:this.clickOnRadioContinuousType,continuousType:this.state.continuousType}))),o.a.createElement(re,{name:"yourName",type:"text",commonProps:c}),o.a.createElement(re,{name:"email",type:"text",commonProps:c}),o.a.createElement(re,{name:"phone",type:"text",commonProps:c}),o.a.createElement(re,{name:"comment",type:"textarea",commonProps:c}),o.a.createElement(J.b,{disabled:n,onClick:this.onSubmit},t.add)))))}},{key:"validate",value:function(e,t){var n=this.msgCreator([{name:e,value:t}]);this.setState({isInvalidMsg:n})}},{key:"validateAll",value:function(){var e,t=Object(E.a)({},this.state.isBlurred),n=[],a=Object.keys(t);a.forEach(function(a){t[a]=!0,e=document.getElementById(a),n.push({name:a,value:e.value})});var o=this.msgCreator(n);this.setState({isBlurred:t,isInvalidMsg:o});var r=!1;return a.forEach(function(e){r||""===o[e]||(r=!0)}),r}},{key:"msgCreator",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(E.a)({},this.state.isInvalidMsg),a=Object(E.a)({},this.state.isBlurred),o="",r="",i="",s="";return t.forEach(function(t){switch(i=t.name,s=t.value.trim().toLowerCase(),i){case"city":n[i]=e.checkCity(s);break;case"subType":n[i]=e.checkSubType(s);break;case"price":n[i]=e.checkPrice(s);break;case"unit":n[i]=e.checkUnit(s);break;case"available_quantity":n[i]=e.checkAvailableQuantity(s);break;case"yourName":n[i]=e.checkYourName(s);break;case"email":var c=document.querySelector('input[name="phone"]');o=e.checkEmail(s),r=e.checkPhone(c.value),""===o||""===r?(n.phone="",n[i]=""):(n[i]=o,a.phone=!0,n.phone="Phone or Email should not be empty");break;case"phone":var l=document.querySelector('input[name="email"]');r=e.checkPhone(s),o=e.checkEmail(l.value),""===r||""===o?(n[i]="",n.email=""):(n[i]=r,n.email="Email or Phone should not be empty");break;case"comment":n[i]=e.checkComment(s);break;case"plan_to_have_quantity":n[i]=e.checkQuantity(s);break;case"plan_to_have_price":n[i]=e.checkPrice(s);break;case"frequencyNum":n[i]=e.checkFrequencyNum(s);break;case"month":n[i]=e.checkMonth(s);break;case"year":n[i]=e.checkYear(s)}}),n}},{key:"checkCity",value:function(e){var t="";return""===e?t="City field most be chose from on of the opened list above":(-1===Object.values(this.props.cFF.cities).map(function(e){return e.toLowerCase()}).indexOf(e)&&(t="City field most be chose from on of the opened list above"),t)}},{key:"checkSubType",value:function(e){var t="";return""===e?t="subType field most be chose from on of the opened list above":(-1===Object.values(this.props.cFF.subTypes).map(function(e){return e.toLowerCase()}).indexOf(e)&&(t="subType field most be chose from on of the opened list above"),t)}},{key:"checkUnit",value:function(e){var t="";return""===e&&(t="Unit should not be empty and most be chose from on of the opened list above"),-1===Object.values(this.props.common.units).indexOf(e)&&(t="Unit most be chose from on of the opened list above"),t}},{key:"checkPrice",value:function(e){var t="";return""===e&&(t="Price should not be empty"),t}},{key:"checkAvailableQuantity",value:function(e){var t="";return""===e&&(t="Available quantity should not be empty"),t}},{key:"checkYourName",value:function(e){var t="";return""===e&&(t="Your Name field should not be empty"),t}},{key:"checkEmail",value:function(e){var t="";return""===e?t="Email or Phone should not be empty":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(t="Email is not correct"),t}},{key:"checkPhone",value:function(e){var t="";return""===e&&(t="Phone should not be empty"),t}},{key:"checkComment",value:function(e){var t="";return e.length>199&&(t="This is a maximum size"),t}},{key:"checkQuantity",value:function(e){var t="";return""===e&&(t="Quantity should not be empty"),t}},{key:"checkFrequencyNum",value:function(e){var t="";if(""===e)return t="???? should not be empty and most be chose from on of the opened list above";var n=this.state.continuousType;return-1===("day"===n?["1","2","3","4","5","6"]:"week"===n?["1","2","3"]:["1","2","3","4","5","6","7","8","9","10","11","12"]).indexOf(e)&&(t="??? most be chose from on of the opened list above"),t}},{key:"checkMonth",value:function(e){var t="";if(""===e)return"Month field should not be empty";var n=h()().localeData().months();return-1===["1","2","3","4","5","6","7","8","9","10","11","12"].indexOf(e)&&-1===n.indexOf(e)&&(t="\u0531\u0574\u056b\u057d \u0564\u0561\u0577\u057f\u0568 \u057a\u0565\u057f\u0584 \u0567 \u0568\u0576\u057f\u0580\u057e\u0561\u056e \u056c\u056b\u0576\u056b \u0576\u0565\u0580\u0584\u0587\u0578\u0582\u0574 \u0562\u0561\u0581\u057e\u0561\u056e \u0581\u0578\u0582\u0581\u0561\u056f\u056b\u0581 \u056f\u0561\u0574 \u0564\u0580\u0561\u0576 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576 \u0569\u056b\u057e \u0574\u0578\u0582\u057f\u0584\u0561\u0563\u0580\u057e\u056b"),t}},{key:"checkYear",value:function(e){var t="";if(""===e)return"Year field should not be empty";for(var n=(new Date).getFullYear(),a=[],o=n;o<n+31;o++)a.push(String(o));return-1===a.indexOf(e)&&(t="\u054f\u0561\u0580\u056b \u0564\u0561\u0577\u057f\u0568 \u057a\u0565\u057f\u0584 \u0567 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576\u056b \u0576\u0565\u0580\u0584\u0587\u0578\u0582\u0574 \u0562\u0561\u0581\u057e\u0561\u056e \u0581\u0578\u0582\u0581\u0561\u056f\u056b \u0578\u0580\u0587\u0565 \u0561\u0576\u0564\u0561\u0574\u056b \u0570\u0565\u057f"),t}}]),t}(a.Component),Bt=Object(d.b)(function(e){return{common:e.content.common,cFF:e.content.Filter,email:e.user.email,isFetchingAddNew:e.proposals.isFetchingAddNew,startAddNewProposalAction:e.startAddNewProposalAction,addNewProposalAction:e.addNewProposalAction}},{startAddNewProposalAction:pt,addNewProposalAction:dt})(xt),Pt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props,n=t.startAddNewProposalAction,a=t.addNewProposalAction,o=t.history;n(),a(e,function(){o.push("/")})}},{key:"render",value:function(){return o.a.createElement(Bt,{editMode:!1,submit:this.handleSubmit})}}]),t}(a.Component),Rt=Object(d.b)(function(e){return{startAddNewProposalAction:e.startAddNewProposalAction,addNewProposalAction:e.addNewProposalAction}},{startAddNewProposalAction:pt,addNewProposalAction:dt})(Pt),Gt=function(){return{type:"EDIT_PROPOSAL_START_FETCHING"}},Yt=function(e){return{type:"EDIT_PROPOSAL_SUCCESS",payload:e}},Ut=function(e){return{type:"EDIT_PROPOSAL_FAIL",payload:e}},qt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props,n=t.startEditProposalAction,a=t.editProposalAction,o=t.history;n(),a(e,function(){o.push("/")})}},{key:"render",value:function(){return o.a.createElement(Bt,{editMode:!0,proposal:this.props.location.state,submit:this.handleSubmit})}}]),t}(a.Component),Vt=Object(d.b)(function(e){return{startEditProposalAction:e.startEditProposalAction,editProposalAction:e.editProposalAction}},{startEditProposalAction:function(){return function(e){e(Gt())}},editProposalAction:function(e,t){return function(n){var a=localStorage.getItem("access_token");fetch("/proposalStatement",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return t(),n(Yt());throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(Ut(e))})}}})(qt),Zt=function(){return{type:"SAVE_DEMAND_START_FETCHING"}},Wt=function(e){return{type:"SAVE_DEMAND_SUCCESS",payload:[e]}},Ht=function(e){return{type:"SAVE_DEMAND_FAIL",payload:e}},Jt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={price:"",unit:"",quantity:"",yourName:"",email:"",phone:"",comment:"",year:"",month:"",day:"",city:"",subType:"",oneTime:!0,continuous:!1,continuousType:"day",frequencyNum:"",is_mark_the_date:!1,isBlurred:{city:!1,subType:!1,price:!1,unit:!1,quantity:!1,yourName:!1,email:!1,phone:!1,comment:!1},isInvalidMsg:{city:"",subType:"",price:"",unit:"",quantity:"",yourName:"",email:"",phone:"",comment:""}},n.handleFocusOnInput=n.handleFocusOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleBlurOnInput=n.handleBlurOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleInputOnInput=n.handleInputOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleFocusOnDropdownInput=n.handleFocusOnDropdownInput.bind(Object(q.a)(Object(q.a)(n))),n.handleClickOnDropdownListItem=n.handleClickOnDropdownListItem.bind(Object(q.a)(Object(q.a)(n))),n.handleBlurOnDropdownListItem=n.handleBlurOnDropdownListItem.bind(Object(q.a)(Object(q.a)(n))),n.toggleIsMarkTheDate=n.toggleIsMarkTheDate.bind(Object(q.a)(Object(q.a)(n))),n.clickOnRadio=n.clickOnRadio.bind(Object(q.a)(Object(q.a)(n))),n.clickOnRadioContinuousType=n.clickOnRadioContinuousType.bind(Object(q.a)(Object(q.a)(n))),n.validateAll=n.validateAll.bind(Object(q.a)(Object(q.a)(n))),n.validate=n.validate.bind(Object(q.a)(Object(q.a)(n))),n.setNameValue=n.setNameValue.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.editMode){var t=function(e){var t=e.parentElement;t.classList.add("jump"),t.classList.remove("jumpCancel")},n=function(e,t){t&&j.push({name:e,value:t})},a=this.props.demand,o=a.price,r=a.unit,i=a.quantity,s=a.email?a.email:"",c=a.phone?a.phone:"",l=a.comment?a.comment:"",u=a.is_mark_the_date?a.year:"",m=a.is_mark_the_date?a.month:"",d=a.is_mark_the_date&&a.day?a.day:"",p=a.region,h=a.city,y=a.type,f=a.subType,b=a.oneTime,v=a.continuous,E=a.continuous?a.continuousType:"day",O=a.continuous?a.frequencyNum:"",g=a.is_mark_the_date;this.setState({price:o,unit:r,quantity:i,email:s,phone:c,comment:l,year:u,month:m,day:d,region:p,city:h,type:y,subType:f,oneTime:b,continuous:v,continuousType:E,frequencyNum:O,is_mark_the_date:g,date:a.date,_id:a._id,user_id:a.user_id});var k=document.querySelector("form.add_demand"),j=[{name:"price",value:o},{name:"quantity",value:i}];n("email",s),n("phone",c),n("comment",l),n("year",u),n("month",m),n("day",d),n("frequencyNum",O),function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){var n=k.querySelector("#".concat(e.name));n.value=[e.value],t(n)})}(j);!function(n){n.forEach(function(n){var a=k.querySelector("#".concat(n.name));a.dataset.en=n.value,a.value=e.props.cFF[n.listName][n.value],t(a)})}([{name:"region",listName:"regions",value:p},{name:"city",listName:"cities",value:h},{name:"type",listName:"types",value:y},{name:"subType",listName:"subTypes",value:f}]);var _=k.querySelector("#unit");_.dataset.en=r,_.value=this.props.common.units[r],t(_),v?(k.querySelector('input[value="continuous"]').checked=!0,"day"===E?k.querySelector('input[value="day"]').checked=!0:"week"===E?k.querySelector('input[value="week"]').checked=!0:k.querySelector('input[value="month"]').checked=!0):g&&(k.querySelector("#is_mark_the_date").checked=!0)}}},{key:"toggleIsMarkTheDate",value:function(){var e=Object(E.a)({},this.state.isBlurred),t=Object(E.a)({},this.state.isInvalidMsg);this.state.is_mark_the_date?(delete e.year,delete e.month,delete t.year,delete t.month,this.setState({is_mark_the_date:!1,isBlurred:e,isInvalidMsg:t})):(e.year=!1,e.month=!1,t.year="",t.month="",this.setState({is_mark_the_date:!0,isBlurred:e,isInvalidMsg:t}))}},{key:"clickOnRadio",value:function(e){var t=e.target.value;if(!this.state[t]){var n=Object(E.a)({},this.state.isBlurred),a=Object(E.a)({},this.state.isInvalidMsg);"continuous"===t?(n.frequencyNum=!1,a.frequencyNum="",this.setState({oneTime:!this.state.oneTime,continuous:!this.state.continuous,isBlurred:n,isInvalidMsg:a})):(delete n.frequencyNum,delete a.frequencyNum,this.setState({oneTime:!this.state.oneTime,continuous:!this.state.continuous,isBlurred:n,isInvalidMsg:a}))}}},{key:"clickOnRadioContinuousType",value:function(e){var t=e.target.value;this.setState({continuousType:t})}},{key:"handleFocusOnInput",value:function(e){new K(e).focus()}},{key:"handleBlurOnInput",value:function(e){var t=new K(e);t.blur();var n=t.getNameValue(),a=n.name,o=n.value;this.setIsBlurredTrue(a),this.validate(a,o)}},{key:"handleInputOnInput",value:function(e){var t=new K(e),n=t.getNameValue(),a=n.name,o=n.value,r=t.getDatasetEn();this.state.isBlurred[a]&&this.validate(a,o),this.setNameValue(a,r||o)}},{key:"handleFocusOnDropdownInput",value:function(e){new _t(e).focus()}},{key:"handleClickOnDropdownListItem",value:function(e){var t=new Mt(e);t.click();var n=t.getInput();this.setIsInvalidMsgByNameToEmpty(n.name)}},{key:"handleBlurOnDropdownListItem",value:function(e){var t=new K(e);if(t.checkListIsClosed()){var n=t.getNameValue(),a=n.name,o=n.value;this.setIsBlurredTrue(a),this.validate(a,o)}}},{key:"onSubmit",value:function(e){if(e.preventDefault(),!this.validateAll()){var t=this.state,n=(t.isBlurred,t.isInvalidMsg,Object(Ie.a)(t,["isBlurred","isInvalidMsg"]));this.props.submit(n)}}},{key:"setIsBlurredTrue",value:function(e){var t=Object(E.a)({},this.state.isBlurred);t[e]=!0,this.setState({isBlurred:t})}},{key:"setIsInvalidMsgByNameToEmpty",value:function(e){var t=Object(E.a)({},this.state.isInvalidMsg);t[e]="",this.setState({isInvalidMsg:t})}},{key:"setNameValue",value:function(e,t){this.setState(Object(B.a)({},e,t))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isBlurred,a=t.isInvalidMsg,r=Object(Ie.a)(t,["isBlurred","isInvalidMsg"]),i=this.props,s=i.common,c=i.isFetchingAddNew,l={onFocus:this.handleFocusOnInput,onBlur:this.handleBlurOnInput,onInput:this.handleInputOnInput,isBlurred:n,isInvalidMsg:a},u={onFocus:this.handleFocusOnDropdownInput,onClick:this.handleClickOnDropdownListItem,onBlur:this.handleBlurOnDropdownListItem,onInput:this.handleInputOnInput,setNameValue:this.setNameValue,isBlurred:n,isInvalidMsg:a};return o.a.createElement(J.j,{className:"add_demand"},o.a.createElement(gt,{onFocus:this.handleFocusOnDropdownInput,onClick:this.handleClickOnDropdownListItem,onBlur:this.handleBlurOnDropdownListItem,onInput:this.handleInputOnInput,setNameValue:this.setNameValue,isBlurred:n,isInvalidMsg:a}),o.a.createElement("div",{className:"mt-4 d-flex justify-content-around"},o.a.createElement("div",{className:"w-50"},o.a.createElement(J.e,{className:"mx-auto my-4"},o.a.createElement(re,{name:"price",type:"number",commonProps:l}),o.a.createElement(Lt,{name:"unit",type:"text",commonProps:u,list:kt,listName:"units"}),o.a.createElement(re,{name:"quantity",type:"number",commonProps:l}),o.a.createElement(J.l,{className:"d-flex"},o.a.createElement(J.l,{check:!0,className:"mr-5"},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"plan_to_have_radio",value:"oneTime",defaultChecked:"true",onClick:this.clickOnRadio}),s.oneTime)),o.a.createElement(J.l,{check:!0},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{type:"radio",name:"plan_to_have_radio",value:"continuous",onClick:this.clickOnRadio}),s.continuous))),o.a.createElement(J.l,{className:this.state.oneTime?"":"d-none"},o.a.createElement(J.l,{check:!0},o.a.createElement(J.n,{check:!0},o.a.createElement(J.m,{id:"is_mark_the_date",type:"checkbox",onChange:this.toggleIsMarkTheDate})," ",s.mark_the_date)),o.a.createElement(J.f,{isOpen:this.state.is_mark_the_date},o.a.createElement(J.l,{className:"d-flex"},o.a.createElement(Nt,{commonProps:u}),o.a.createElement(At,{commonProps:u}),o.a.createElement(Tt,{commonProps:u,year:this.state.year,month:this.state.month})))),o.a.createElement(J.l,{className:this.state.continuous?"":"d-none"},o.a.createElement(Ft,{commonProps:u,onClickOnRadioContinuousType:this.clickOnRadioContinuousType,continuousType:this.state.continuousType})),o.a.createElement(re,{name:"yourName",type:"text",commonProps:l}),o.a.createElement(re,{name:"email",type:"text",commonProps:l}),o.a.createElement(re,{name:"phone",type:"text",commonProps:l}),o.a.createElement(re,{name:"comment",type:"textarea",commonProps:l}),o.a.createElement(J.b,{disabled:c,onClick:function(t){return e.onSubmit(t)}},s.add))),o.a.createElement("div",{className:"position-relative w-50"},o.a.createElement("div",{className:"Demand proposal_demand_container position-fixed"},o.a.createElement(st,{demand:r})))))}},{key:"validateAll",value:function(){var e,t=Object(E.a)({},this.state.isBlurred),n=[],a=Object.keys(t);a.forEach(function(a){t[a]=!0,e=document.getElementById(a),n.push({name:a,value:e.value})});var o=this.msgCreator(n);this.setState({isBlurred:t,isInvalidMsg:o});var r=!1;return a.forEach(function(e){r||""===o[e]||(r=!0)}),r}},{key:"validate",value:function(e,t){var n=this.msgCreator([{name:e,value:t}]);this.setState({isInvalidMsg:n})}},{key:"msgCreator",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(E.a)({},this.state.isInvalidMsg),a=Object(E.a)({},this.state.isBlurred),o="",r="",i="",s="";return t.forEach(function(t){switch(i=t.name,s=t.value.trim().toLowerCase(),i){case"city":n[i]=e.checkCity(s);break;case"subType":n[i]=e.checkSubType(s);break;case"price":n[i]=e.checkPrice(s);break;case"unit":n[i]=e.checkUnit(s);break;case"quantity":n[i]=e.checkQuantity(s);break;case"yourName":n[i]=e.checkYourName(s);break;case"email":var c=document.querySelector('input[name="phone"]');o=e.checkEmail(s),r=e.checkPhone(c.value),""===o||""===r?(n.phone="",n[i]=""):(n[i]=o,a.phone=!0,e.setState({isBlurred:a}),n.phone="Phone or Email should not be empty");break;case"phone":var l=document.querySelector('input[name="email"]');r=e.checkPhone(s),o=e.checkEmail(l.value),""===r||""===o?(n[i]="",n.email=""):(n[i]=r,a.email=!0,e.setState({isBlurred:a}),n.email="Email or Phone should not be empty");break;case"comment":n[i]=e.checkComment(s);break;case"frequencyNum":n[i]=e.checkFrequencyNum(s);break;case"month":n[i]=e.checkMonth(s);break;case"year":n[i]=e.checkYear(s)}}),n}},{key:"checkCity",value:function(e){var t="";return""===e?t="City field most be chose from on of the opened list above":(-1===Object.values(this.props.cFF.cities).map(function(e){return e.toLowerCase()}).indexOf(e)&&(t="City field most be chose from on of the opened list above"),t)}},{key:"checkSubType",value:function(e){var t="";return""===e?t="subType field most be chose from on of the opened list above":(-1===Object.values(this.props.cFF.subTypes).map(function(e){return e.toLowerCase()}).indexOf(e)&&(t="subType field most be chose from on of the opened list above"),t)}},{key:"checkUnit",value:function(e){var t="";return""===e&&(t="Unit should not be empty and most be chose from on of the opened list above"),-1===Object.values(this.props.common.units).indexOf(e)&&(t="Unit most be chose from on of the opened list above"),t}},{key:"checkPrice",value:function(e){var t="";return""===e&&(t="Price should not be empty"),t}},{key:"checkQuantity",value:function(e){var t="";return""===e&&(t="Available quantity should not be empty"),t}},{key:"checkYourName",value:function(e){var t="";return""===e&&(t="Your Name field should not be empty"),t}},{key:"checkEmail",value:function(e){var t="";return""===e?t="Email or Phone should not be empty":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(t="Email is not correct"),t}},{key:"checkPhone",value:function(e){var t="";return""===e&&(t="Phone should not be empty"),t}},{key:"checkComment",value:function(e){var t="";return e.length>199&&(t="This is a maximum size"),t}},{key:"checkFrequencyNum",value:function(e){var t="";if(""===e)return t="???? should not be empty and most be chose from on of the opened list above";var n=this.state.continuousType;return-1===("day"===n?["1","2","3","4","5","6"]:"week"===n?["1","2","3"]:["1","2","3","4","5","6","7","8","9","10","11","12"]).indexOf(e)&&(t="??? most be chose from on of the opened list above"),t}},{key:"checkMonth",value:function(e){var t="";if(""===e)return"Month field should not be empty";var n=h()().localeData().months();return-1===["1","2","3","4","5","6","7","8","9","10","11","12"].indexOf(e)&&-1===n.indexOf(e)&&(t="\u0531\u0574\u056b\u057d \u0564\u0561\u0577\u057f\u0568 \u057a\u0565\u057f\u0584 \u0567 \u0568\u0576\u057f\u0580\u057e\u0561\u056e \u056c\u056b\u0576\u056b \u0576\u0565\u0580\u0584\u0587\u0578\u0582\u0574 \u0562\u0561\u0581\u057e\u0561\u056e \u0581\u0578\u0582\u0581\u0561\u056f\u056b\u0581 \u056f\u0561\u0574 \u0564\u0580\u0561\u0576 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576 \u0569\u056b\u057e \u0574\u0578\u0582\u057f\u0584\u0561\u0563\u0580\u057e\u056b"),t}},{key:"checkYear",value:function(e){var t="";if(""===e)return"Year field should not be empty";for(var n=(new Date).getFullYear(),a=[],o=n;o<n+31;o++)a.push(String(o));return-1===a.indexOf(e)&&(t="\u054f\u0561\u0580\u056b \u0564\u0561\u0577\u057f\u0568 \u057a\u0565\u057f\u0584 \u0567 \u0570\u0561\u0574\u0561\u057a\u0561\u057f\u0561\u057d\u056d\u0561\u0576\u056b \u0576\u0565\u0580\u0584\u0587\u0578\u0582\u0574 \u0562\u0561\u0581\u057e\u0561\u056e \u0581\u0578\u0582\u0581\u0561\u056f\u056b \u0578\u0580\u0587\u0565 \u0561\u0576\u0564\u0561\u0574\u056b \u0570\u0565\u057f"),t}}]),t}(a.Component),zt=Object(d.b)(function(e){return{common:e.content.common,cFF:e.content.Filter,email:e.user.email,isFetchingAddNew:e.demands.isFetchingAddNew}})(Jt),Xt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props,n=t.startAddNewDemandAction,a=t.addNewDemandAction,o=t.history;n(),a(e,function(){o.push("/")})}},{key:"render",value:function(){this.props.isFetchingAddNew;return o.a.createElement(zt,{editMode:!1,submit:this.handleSubmit})}}]),t}(a.Component),Qt=Object(d.b)(function(e){return{isFetchingAddNew:e.demands.isFetchingAddNew,startAddNewDemandAction:e.startAddNewDemandAction,addNewDemandAction:e.addNewDemandAction}},{startAddNewDemandAction:function(){return function(e){e(Zt())}},addNewDemandAction:function(e,t){return function(n){var a=localStorage.getItem("access_token");fetch("/addNewDemand",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return t(),n(Wt(e.demand));throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(Ht(e))})}}})(Xt),Kt=function(){return{type:"EDIT_DEMAND_START_FETCHING"}},$t=function(){return{type:"EDIT_DEMAND_SUCCESS"}},en=function(e){return{type:"EDIT_DEMAND_FAIL",payload:e}},tn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props,n=t.startEditDemandAction,a=t.editDemandAction,o=t.history;n(),a(e,function(){o.push("/")})}},{key:"render",value:function(){return o.a.createElement(zt,{editMode:!0,demand:this.props.location.state,submit:this.handleSubmit})}}]),t}(a.Component),nn=Object(d.b)(function(e){return{startEditDemandAction:e.startEditDemandAction,editDemandAction:e.editDemandAction}},{startEditDemandAction:function(){return function(e){e(Kt())}},editDemandAction:function(e,t){return function(n){var a=localStorage.getItem("access_token");fetch("/demandStatement",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return t(),n($t());throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),n(en(e))})}}})(tn),an=function(e){return{type:"SET_USER_EMAIL",payload:e}},on=function(e,t){return function(n){n(an(e)),t()}},rn=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location,n=t.search,a=t.pathname+("undefined"!==n?n:"");fetch(a).then(function(e){return e.json()}).then(function(t){t.ok&&e.props.setUserEmailAction(t.user.email,function(){e.props.history.push("/login")})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){return o.a.createElement("div",null,"VerifyEmail")}}]),t}(a.Component),sn=Object(d.b)(null,{setUserEmailAction:on})(rn),cn=function(){return{type:"RESET_PASSWORD_SEND_EMAIL_START_FETCHING"}},ln=function(){return{type:"RESET_PASSWORD_SEND_EMAIL_SUCCESS"}},un=function(e){return{type:"RESET_PASSWORD_SEND_EMAIL_FAIL",payload:e}},mn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isInvalidMsg:{email:""},isBlurred:{email:!1}},n.handleOnInput=n.handleOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleOnBlur=n.handleOnBlur.bind(Object(q.a)(Object(q.a)(n))),n.handleOnFocus=n.handleOnFocus.bind(Object(q.a)(Object(q.a)(n))),n.handleSendEmail=n.handleSendEmail.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleOnInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(B.a)({},t,n))}},{key:"handleOnFocus",value:function(e){new K(e).focus()}},{key:"handleOnBlur",value:function(e){new K(e).blur()}},{key:"handleSendEmail",value:function(e){e.preventDefault(),this.props.startSendEmail(),this.props.resetPasswordSendEmail({email:this.state.email})}},{key:"render",value:function(){var e=this.props.common,t=this.state;t.isBlurred,t.isInvalidMsg;return o.a.createElement("div",{className:"d-flex flex-column align-items-center"},o.a.createElement(J.j,{className:"col-4 mt-4"},o.a.createElement(J.l,{className:"jumperLabel"},o.a.createElement(J.n,{for:"email"},e.email),o.a.createElement(J.m,{id:"email",name:"email",onChange:this.handleOnInput,onBlur:this.handleOnBlur,onFocus:this.handleOnFocus})),o.a.createElement(J.b,{onClick:this.handleSendEmail},"Send Verification code")))}}]),t}(a.Component),dn=Object(d.b)(function(e){return{common:e.content.common}},{startSendEmail:function(){return function(e){e(cn())}},resetPasswordSendEmail:function(e){return function(t){fetch("/resetPasswordSendEmail",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error(e.errors||"something wrong");t(ln())}).catch(function(e){console.error(e),t(un(e))})}}})(mn),pn=function(){return{type:"RESET_PASSWORD_SEND_EMAIL_START_FETCHING"}},hn=function(e){return{type:"LOGIN_SUCCESS",payload:e}},yn=function(e){return{type:"RESET_PASSWORD_SEND_EMAIL_FAIL",payload:e}},fn=function(e,t){return function(n){n(pn()),fetch("/resetPassword",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.ok)return localStorage.setItem("access_token",e.access_token),n(hn(e.user)),void t();throw new Error(e.errors||"something wrong")}).catch(function(e){console.error(e),n(yn(e))})}},bn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",key:"",password:"",repeat_password:"",isInvalidMsg:{password:"",repeat_password:""},isBlurred:{password:!1,repeat_password:!1}},n.handleOnInput=n.handleOnInput.bind(Object(q.a)(Object(q.a)(n))),n.handleOnBlur=n.handleOnBlur.bind(Object(q.a)(Object(q.a)(n))),n.handleOnFocus=n.handleOnFocus.bind(Object(q.a)(Object(q.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search),t=e.get("key"),n=e.get("email");t&&n&&(this.setState({email:n,key:t}),this.props.history.push("/resetPassword"))}},{key:"handleOnInput",value:function(e){var t=new K(e).getNameValue(),n=t.name,a=t.value;this.state.isBlurred[n]&&this.validate(n,a),this.setState(Object(B.a)({},n,a))}},{key:"handleOnFocus",value:function(e){new K(e).focus()}},{key:"handleOnBlur",value:function(e){var t=new K(e),n=t.getNameValue(),a=n.name,o=n.value;t.blur(),this.setIsBlurredTrue(a),this.validate(a,o)}},{key:"setIsBlurredTrue",value:function(e){var t=Object(E.a)({},this.state.isBlurred);t[e]=!0,this.setState({isBlurred:t})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.validateAll()){var t=this.state,n=t.email,a=t.key,o=t.password,r=t.repeat_password;this.props.resetPassword({email:n,key:a,password:o,repeat_password:r},this.props.history.push("/"))}}},{key:"render",value:function(){this.props.common;var e=this.state,t=e.isBlurred,n=e.isInvalidMsg,a={onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,onInput:this.handleOnInput,isBlurred:t,isInvalidMsg:n};return o.a.createElement("div",{className:"d-flex flex-column align-items-center"},o.a.createElement(J.j,{className:"col-4 mt-4"},o.a.createElement(re,{name:"password",type:"password",commonProps:a}),o.a.createElement(re,{name:"repeat_password",type:"password",commonProps:a}),o.a.createElement(J.b,{onClick:this.handleSubmit},"Change password")))}},{key:"validateAll",value:function(){var e,t=Object(E.a)({},this.state.isBlurred),n=[],a=Object.keys(t);a.forEach(function(a){t[a]=!0,e=document.getElementById(a),n.push({name:a,value:e.value})});var o=this.msgCreator(n);this.setState({isBlurred:t,isInvalidMsg:o});var r=!1;return a.forEach(function(e){r||""===o[e]||(r=!0)}),r}},{key:"validate",value:function(e,t){var n=this.msgCreator([{name:e,value:t.trim()}]);this.setState({isInvalidMsg:n})}},{key:"msgCreator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(E.a)({},this.state.isInvalidMsg),n="",a="";return e.forEach(function(e){switch(n=e.name,a=e.value,t[n]="",n){case"password":var o=document.querySelector('input[name = "repeat_password"]');if(""===a){t[n]="Password should not be empty and most be at least 7 characters";break}if(a.length<7){t[n]="Password most be at least 7 characters";break}if(a!==o.value.trim()){t[n]="Passwords not matched",t[o.name]="Passwords not matched";break}t[o.name]="";break;case"repeat_password":var r=document.querySelector('input[name = "password"]');if(""===a){t[n]="Password should not be empty and most be at least 7 characters";break}if(a.length<7){t[n]="Password most be at least 7 characters";break}if(a!==r.value.trim()){t[n]="Passwords not matched",t[r.name]="Passwords not matched";break}t[r.name]=""}}),t}}]),t}(a.Component),vn=Object(d.b)(function(e){return{common:e.content.common}},{resetPassword:fn})(bn),En=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={modal:!1,id:""},n.toggle=n.toggle.bind(Object(q.a)(Object(q.a)(n))),n.editStatement=n.editStatement.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"deleteStatement",value:function(){this.props.delete(this.state.id)}},{key:"editStatement",value:function(e){var t=this.findId(e);this.props.edit(t)}},{key:"setId",value:function(e){var t=this.findId(e);this.setState({id:t})}},{key:"findId",value:function(e){return e.target.parentElement.parentElement.parentElement.parentElement.dataset.id}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"d-flex justify-content-around position-absolute mb-2",style:{top:"-30px",right:"24px",width:"70px"}},o.a.createElement("div",null,o.a.createElement("a",{onClick:this.editStatement},o.a.createElement("img",{src:n(60),height:"24",alt:"Edit"}))),o.a.createElement("div",null,o.a.createElement("a",{onClick:function(t){e.toggle(),e.setId(t)}},o.a.createElement("img",{src:n(61),height:"24",alt:"Delete"})),o.a.createElement(J.q,{isOpen:this.state.modal,toggle:this.toggle},o.a.createElement(J.r,null,"Do you want to delete?"),o.a.createElement(J.s,null,o.a.createElement(J.b,{color:"primary",onClick:function(t){e.toggle(),e.deleteStatement()}},"Delete")," ",o.a.createElement(J.b,{color:"secondary",onClick:this.toggle},"Cancel")))))}}]),t}(a.Component),On=function(){return{type:"GET_DEMANDS_BY_ID_START_FETCHING"}},gn=function(e){return{type:"GET_DEMANDS_BY_ID_SUCCESS",payload:e}},kn=function(e){return{type:"GET_DEMANDS_BY_ID_FAIL",payload:e}},jn=function(e){return function(t){t(On()),fetch("/getDemandsById?_id=".concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(e.ok)return t(gn(e.demandsById));throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),t(kn(e))})}},_n=function(e){return{type:"DELETE_DEMAND_SUCCESS",payload:e}},Sn=function(e){return{type:"DELETE_DEMAND_FAIL",payload:e}},Nn=function(e,t){return function(n){var a=localStorage.getItem("access_token");fetch("/demandStatement",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({_id:e})}).then(function(e){return e.redirected?(t.push("/login"),{ok:!1}):e.json()}).then(function(t){if(t.ok)return console.log(t),n(_n(e));throw new Error(t.errors||"Something wrong")}).catch(function(e){return console.error(e),Sn(e)})}},wn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleDelete=n.handleDelete.bind(Object(q.a)(Object(q.a)(n))),n.handleEdit=n.handleEdit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user._id;this.props.getDemandsByIdAction(e)}},{key:"handleDelete",value:function(e){var t=this.props.history;this.props.deleteDemandAction(e,t)}},{key:"handleEdit",value:function(e){var t=this.props,n=t.history,a=t.demandsById.filter(function(t){return t._id===e});n.push({pathname:"/editDemand",state:a[0]})}},{key:"render",value:function(){var e=this,t=this.props.demandsById;return o.a.createElement(a.Fragment,null,t.map(function(t,n){return o.a.createElement("div",{className:"position-relative Demand mb-5 mt-3","data-id":t._id,key:n},o.a.createElement(En,{delete:e.handleDelete,edit:e.handleEdit}),o.a.createElement(st,{demand:t}))}))}}]),t}(a.Component),An=Object(d.b)(function(e){return{user:e.user,demandsById:e.demandsById.demandsById}},{getDemandsByIdAction:jn,deleteDemandAction:Nn})(wn),In=function(){return{type:"GET_PROPSALS_BY_ID_START_FETCHING"}},Tn=function(e){return{type:"GET_PROPOSALS_BY_ID_SUCCESS",payload:e}},Cn=function(e){return{type:"GET_PROPOSALS_BY_ID_FAIL",payload:e}},Fn=function(e){return function(t){t(In()),fetch("/getProposalsById?_id=".concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(e.ok)return t(Tn(e.proposalsById));throw new Error(e.errors||"Something wrong")}).catch(function(e){console.error(e),t(Cn(e))})}},Dn=function(e){return{type:"DELETE_PROPOSAL_SUCCESS",payload:e}},Ln=function(e){return{type:"DELETE_PROPOSAL_FAIL",payload:e}},Mn=function(e,t){return function(n){var a=localStorage.getItem("access_token");fetch("/proposalStatement",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({_id:e})}).then(function(e){return e.redirected?(t.push("/login"),{ok:!1}):e.json()}).then(function(t){if(t.ok)return console.log(t),n(Dn(e));throw new Error(t.errors||"Something wrong")}).catch(function(e){return console.error(e),n(Ln(e))})}},xn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleDelete=n.handleDelete.bind(Object(q.a)(Object(q.a)(n))),n.handleEdit=n.handleEdit.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user._id;this.props.getProposalsByIdAction(e)}},{key:"handleDelete",value:function(e){console.log(e);var t=this.props.history;this.props.deleteProposalAction(e,t)}},{key:"handleEdit",value:function(e){var t=this.props,n=t.history,a=t.proposalsById;console.log(this.props);var o=a.filter(function(t){return t._id===e});console.log(o[0]),n.push({pathname:"/editProposal",state:o[0]})}},{key:"render",value:function(){var e=this,t=this.props.proposalsById;return o.a.createElement(a.Fragment,null,t.map(function(t,n){return o.a.createElement("div",{className:"position-relative Proposal mb-5 mt-3","data-id":t._id,key:n},o.a.createElement(En,{delete:e.handleDelete,edit:e.handleEdit}),o.a.createElement(Je,{proposal:t}))}))}}]),t}(a.Component),Bn=Object(d.b)(function(e){return{user:e.user,proposalsById:e.proposalsById.proposalsById}},{getProposalsByIdAction:Fn,deleteProposalAction:Mn})(xn),Pn=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.history;return o.a.createElement("div",{className:"mt-4 d-flex justify-content-around"},o.a.createElement("div",{className:"proposal_demand_container"},o.a.createElement(Bn,{history:e})),o.a.createElement("div",{className:"proposal_demand_container"},o.a.createElement(An,{history:e})))}}]),t}(a.Component),Rn=n(66),Gn=function(e){var t=function(t){function n(){return Object(s.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(c.a)(n,[{key:"render",value:function(){var t=this.props.user,n=t.isFetching,a=t.isLoggedIn;return n?o.a.createElement("div",null,"Loading..."):a?o.a.createElement(e,this.props):o.a.createElement(Rn.a,{to:"login"})}}]),n}(o.a.Component);return Object(d.b)(function(e){return{user:e.user}})(t)},Yn=function(){return{type:"LOGOUT"}},Un=function(e){return localStorage.removeItem("access_token"),function(t){t(Yn()),e()}},qn=Object(H.a)(),Vn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).logout=n.logout.bind(Object(q.a)(Object(q.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){document.querySelector("body").className="light"}},{key:"toggleMode",value:function(e){document.querySelector("body").className=e.target.innerText.toLowerCase()}},{key:"logout",value:function(){this.props.logoutAction(function(){qn.push("/")})}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.user.username;return o.a.createElement(V.a,{history:qn},o.a.createElement("div",null,o.a.createElement("ul",{className:"nav justify-content-between"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(Z.a,{className:"nav-link",to:"/"},"home")),o.a.createElement("li",null,o.a.createElement("ul",{className:"d-flex justify-content-between"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(Z.a,{className:"nav-link green",to:"/addNewProposal"},t.addNewProposal)),o.a.createElement("li",{className:"nav-item"},o.a.createElement(Z.a,{className:"nav-link red",to:"/addNewDemand"},t.addNewDemand)))),this.props.user.isLoggedIn?o.a.createElement(J.v,{nav:!0,inNavbar:!0},o.a.createElement(J.i,{nav:!0,caret:!0},n),o.a.createElement(J.h,{right:!0},o.a.createElement(Z.a,{className:"dropdown-item",to:"/myStatements"},"My statements"),o.a.createElement(J.g,null,"Settings"),o.a.createElement(J.g,{divider:!0}),o.a.createElement(J.g,{onClick:this.logout},"logout"))):o.a.createElement("li",null,o.a.createElement("ul",{className:"d-flex justify-content-between"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(Z.a,{className:"nav-link",to:"/login"},t.login)),o.a.createElement("li",{className:"nav-item"},o.a.createElement(Z.a,{className:"nav-link",to:"/register"},t.register)))),o.a.createElement("li",{className:"light-dark"},o.a.createElement("ul",{className:"d-flex justify-content-between"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",onClick:this.toggleMode},"Light")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",onClick:this.toggleMode},"Dark")))),o.a.createElement("li",null,o.a.createElement(me,null))),o.a.createElement(W.a,{exact:!0,path:"/",component:mt}),o.a.createElement(W.a,{path:"/addNewProposal",component:Gn(Rt)}),o.a.createElement(W.a,{path:"/editProposal",component:Gn(Vt)}),o.a.createElement(W.a,{path:"/addNewDemand",component:Gn(Qt)}),o.a.createElement(W.a,{path:"/editDemand",component:Gn(nn)}),o.a.createElement(W.a,{path:"/login",component:ee}),o.a.createElement(W.a,{path:"/register",component:se}),o.a.createElement(W.a,{path:"/verifyEmail",component:sn}),o.a.createElement(W.a,{path:"/sendVerificationCode",component:dn}),o.a.createElement(W.a,{path:"/resetPassword",component:vn}),o.a.createElement(W.a,{path:"/myStatements",component:Gn(Pn)})))}}]),t}(a.Component),Zn=Object(d.b)(function(e){return{content:e.content.Navigation,user:e.user,logoutAction:e.logoutAction}},{logoutAction:Un})(Vn),Wn=function(){return{type:"CHECK_TOKEN_START_FETCHING"}},Hn=function(e){return{type:"CHECK_TOKEN_SUCCESS",payload:e}},Jn=function(){return{type:"CHECK_TOKEN_FAIL"}},zn=function(){return function(e){e(Wn());var t=localStorage.getItem("access_token");t?fetch("/checkToken",{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){if(t.ok)return e(Hn(t.user));localStorage.removeItem("access_token"),e(Jn())}).catch(function(t){localStorage.removeItem("access_token"),e(Jn()),console.error(t)}):e(Jn())}};localStorage.lang?(U.dispatch(le(localStorage.lang)),"hy"===localStorage.lang?h.a.locale("hy-am"):h.a.locale(localStorage.lang)):(U.dispatch(le("hy")),h.a.locale("hy-am")),U.dispatch(zn());var Xn=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,{store:U},o.a.createElement(Zn,null))}}]),t}(a.Component),Qn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Kn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(Xn,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Qn?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Kn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Kn(e)})}}()}},[[39,2,1]]]);
//# sourceMappingURL=main.18415c1d.chunk.js.map